<?xml version="1.0"?>
<sdf version="1.7">
  <model name="four_bar_loop">
    <!--
    A straightforward description of a planar 4-bar crank/rocker model,
    with no attempt to specify a spanning tree. This is ideally what we
    would like Drake to be able to work with, with no fuss. There are
    three links (plus World) and four revolute joints, treated uniformly.
    
    We define the links axis-aligned for simplicity but after assembly they
    won't be so neat.  The mechanism moves in the x-y plane; revolute axes
    all point in the +z direction (towards you). "O" marks the link origins
    where there is a frame with the same name as the link, "*" marks an
    additional frame's origin to which a joint will be connected. The
    additional frame's names start with a capital letter matching the link to
    which they are fixed and a lower case letter for the connected link.  All
    frames are aligned with World in the description here.

                                                        * Rt
                                                        | 
                                                        |
                                                        |
      tie O−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−* Tr
                              5m 1kg                    |
          * Ct                                          |
          |                                             | 
          |                                             |
      1m  |                                         2m  |
      1kg |                                         2kg |
          |                                             |              y
          O crank                                       O rocker       |
                                                                       |
          *=======================O=====================*              +−−−−− x
         Wc           2m        World        2m         Wr            /
                                                                     z

    In parent-child order, the joints will connect Wc-crank Wr-rocker Ct-tie
    Tr-Rt. Link mass centers are at their midpoints. Inertias are of thin rods
    (ML²/12). -->

    <!-- Define links & their attached frames. -->

    <frame name="Wc" attached_to="world">
      <pose relative_to="world">-2 0 0 0 0 0</pose>
    </frame>
    <frame name="Wr" attached_to="world">
      <pose relative_to="world">2 0 0 0 0 0</pose>
    </frame>


    <link name="crank">
      <inertial>
        <pose>0 0.5 0 0 0 0</pose>
        <mass>1</mass>
        <inertia>
          <ixx>0.0833333333333333</ixx>
          <iyy>0</iyy>
          <izz>0.0833333333333333</izz>
          <ixy>0</ixy> <ixz>0</ixz> <iyz>0</iyz>
        </inertia>
      </inertial>
    </link>
    <frame name="Ct" attached_to="crank">
      <pose relative_to="crank">0 1 0 0 0 0</pose>
    </frame>


    <link name="rocker">
      <inertial>
        <pose>0 1 0 0 0 0</pose>
        <mass>2</mass>
        <inertia>
          <ixx>0.6666666666666667</ixx>
          <iyy>0</iyy>
          <izz>0.6666666666666667</izz>
          <ixy>0</ixy> <ixz>0</ixz> <iyz>0</iyz>
        </inertia>
      </inertial>
    </link>
    <frame name="Rt" attached_to="rocker">
      <pose relative_to="rocker">0 2 0 0 0 0</pose>
    </frame>


    <link name="tie">
      <inertial>
        <pose>2.5 0 0 0 0 0</pose>
        <mass>1</mass>
        <inertia>
          <ixx>0</ixx>
          <iyy>2.0833333333333333</iyy>
          <izz>2.0833333333333333</izz>
          <ixy>0</ixy> <ixz>0</ixz> <iyz>0</iyz>
        </inertia>
      </inertial>
    </link>
    <frame name="Tr" attached_to="tie">
      <pose relative_to="tie">5 0 0 0 0 0</pose>
    </frame>


    <!-- Define the four joints -->

    <joint name="world_crank" type="revolute">
      <parent>Wc</parent>
      <child>crank</child>
      <axis>
        <xyz expressed_in="__model__">0 0 1</xyz>
      </axis>
    </joint>

    <joint name="world_rocker" type="revolute">
      <parent>Wr</parent>
      <child>rocker</child>
      <axis>
        <xyz expressed_in="__model__">0 0 1</xyz>
      </axis>
    </joint>

    <joint name="crank_tie" type="revolute">
      <parent>Ct</parent>
      <child>tie</child>
      <axis>
        <xyz expressed_in="__model__">0 0 1</xyz>
      </axis>
    </joint>

    <joint name="tie_rocker" type="revolute">
      <parent>Tr</parent>
      <child>Rt</child>
      <axis>
        <xyz expressed_in="__model__">0 0 1</xyz>
      </axis>
    </joint>

  </model>
</sdf>
