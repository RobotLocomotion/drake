classdef SpringFlamingoVisualizer < Visualizer
% Implements the draw function for the Acrobot 

  methods
    function obj = SpringFlamingoVisualizer()
      obj = obj@Visualizer(18);
    end
        
    function draw(obj,t,x)
      Q = x([1:3,7:2:end]);
      % This animation file has been automatically generated by the BuildRobot program.
      
      persistent hFig col body1 body2 body3 body4 body5 body6 body7 body8 body9 body10 body11 body12 body13 body14 body15 body16 body17 body18 body19 body20 body21 body22 body23 body24 body25 body26 body27 body28 body29 body30 body31 body32 body33 r_upper_leg1 r_upper_leg2 r_upper_leg3 r_upper_leg4 r_upper_leg5 r_lower_leg1 r_lower_leg2 r_lower_leg3 r_foot1 r_foot2 l_upper_leg1 l_upper_leg2 l_upper_leg3 l_upper_leg4 l_upper_leg5 l_lower_leg1 l_lower_leg2 l_lower_leg3 l_foot1 l_foot2;
      if (isempty(hFig))
        hFig = figure(25);
        set(hFig,'DoubleBuffer','on');
        col = [0.75 0.75 0.75];
        
        body1 = [-0.014339,-0.014339,0.014339,-0.301034,-0.329713,-0.014339; -0.020479,-0.020479,0.020479,0.241306,0.200348,-0.020479];
        body2 = [-0.016836,-0.016836,0.016836,-0.267773,-0.301445,-0.016836; -0.018481,-0.018481,0.018481,0.277755,0.240793,-0.018481];
        body3 = [-0.019057,-0.019057,0.019057,-0.230131,-0.268245,-0.019057; -0.016181,-0.016181,0.016181,0.309661,0.277298,-0.016181];
        body4 = [-0.020967,-0.020967,0.020967,-0.188725,-0.230658,-0.020967; -0.013616,-0.013616,0.013616,0.336501,0.309268,-0.013616];
        body5 = [-0.022533,-0.022533,0.022533,-0.144232,-0.189298,-0.022533; -0.010829,-0.010829,0.010829,0.357837,0.336179,-0.010829];
        body6 = [-0.023731,-0.023731,0.023731,-0.097380,-0.144841,-0.023731; -0.007864,-0.007864,0.007864,0.373319,0.357591,-0.007864];
        body7 = [-0.024541,-0.024541,0.024541,-0.048934,-0.098015,-0.024541; -0.004771,-0.004771,0.004771,0.382695,0.373153,-0.004771];
        body8 = [-0.024949,-0.024949,0.024949,0.000312,-0.049586,-0.024949; -0.001600,-0.001600,0.001600,0.385811,0.382611,-0.001600];
        body9 = [-0.024949,-0.024949,0.024949,0.049552,-0.000345,-0.024949; 0.001598,0.001598,-0.001598,0.382615,0.385811,0.001598];
        body10 = [-0.024541,-0.024541,0.024541,0.097983,0.048901,-0.024541; 0.004769,0.004769,-0.004769,0.373161,0.382699,0.004769];
        body11 = [-0.023732,-0.023732,0.023732,0.144810,0.097347,-0.023732; 0.007862,0.007862,-0.007862,0.357603,0.373328,0.007862];
        body12 = [-0.022534,-0.022534,0.022534,0.189269,0.144201,-0.022534; 0.010827,0.010827,-0.010827,0.336195,0.357849,0.010827];
        body13 = [-0.020968,-0.020968,0.020968,0.230631,0.188696,-0.020968; 0.013615,0.013615,-0.013615,0.309288,0.336517,0.013615];
        body14 = [-0.019059,-0.019059,0.019059,0.268221,0.230104,-0.019059; 0.016179,0.016179,-0.016179,0.277322,0.309681,0.016179];
        body15 = [-0.016838,-0.016838,0.016838,0.301424,0.267748,-0.016838; 0.018480,0.018480,-0.018480,0.240819,0.277778,0.018480];
        body16 = [-0.014341,-0.014341,0.014341,0.329695,0.301013,-0.014341; 0.020478,0.020478,-0.020478,0.200377,0.241332,0.020478];
        body17 = [-0.014339,-0.014339,0.014339,-0.301034,-0.329713,-0.014339; -0.020479,-0.020479,0.020479,0.241306,0.200348,-0.020479];
        body18 = [-0.016836,-0.016836,0.016836,-0.267773,-0.301445,-0.016836; -0.018481,-0.018481,0.018481,0.277755,0.240793,-0.018481];
        body19 = [-0.019057,-0.019057,0.019057,-0.230131,-0.268245,-0.019057; -0.016181,-0.016181,0.016181,0.309661,0.277298,-0.016181];
        body20 = [-0.020967,-0.020967,0.020967,-0.188725,-0.230658,-0.020967; -0.013616,-0.013616,0.013616,0.336501,0.309268,-0.013616];
        body21 = [-0.022533,-0.022533,0.022533,-0.144232,-0.189298,-0.022533; -0.010829,-0.010829,0.010829,0.357837,0.336179,-0.010829];
        body22 = [-0.023731,-0.023731,0.023731,-0.097380,-0.144841,-0.023731; -0.007864,-0.007864,0.007864,0.373319,0.357591,-0.007864];
        body23 = [-0.024541,-0.024541,0.024541,-0.048934,-0.098015,-0.024541; -0.004771,-0.004771,0.004771,0.382695,0.373153,-0.004771];
        body24 = [-0.024949,-0.024949,0.024949,0.000312,-0.049586,-0.024949; -0.001600,-0.001600,0.001600,0.385811,0.382611,-0.001600];
        body25 = [-0.024949,-0.024949,0.024949,0.049552,-0.000345,-0.024949; 0.001598,0.001598,-0.001598,0.382615,0.385811,0.001598];
        body26 = [-0.024541,-0.024541,0.024541,0.097983,0.048901,-0.024541; 0.004769,0.004769,-0.004769,0.373161,0.382699,0.004769];
        body27 = [-0.023732,-0.023732,0.023732,0.144810,0.097347,-0.023732; 0.007862,0.007862,-0.007862,0.357603,0.373328,0.007862];
        body28 = [-0.022534,-0.022534,0.022534,0.189269,0.144201,-0.022534; 0.010827,0.010827,-0.010827,0.336195,0.357849,0.010827];
        body29 = [-0.020968,-0.020968,0.020968,0.230631,0.188696,-0.020968; 0.013615,0.013615,-0.013615,0.309288,0.336517,0.013615];
        body30 = [-0.019059,-0.019059,0.019059,0.268221,0.230104,-0.019059; 0.016179,0.016179,-0.016179,0.277322,0.309681,0.016179];
        body31 = [-0.016838,-0.016838,0.016838,0.301424,0.267748,-0.016838; 0.018480,0.018480,-0.018480,0.240819,0.277778,0.018480];
        body32 = [-0.014341,-0.014341,0.014341,0.329695,0.301013,-0.014341; 0.020478,0.020478,-0.020478,0.200377,0.241332,0.020478];
        body33 = [-0.012500,-0.012500,0.012500,0.012500,-0.012500,-0.012500; -0.000000,-0.000000,-0.000000,0.000000,0.000000,-0.000000];
        r_upper_leg1 = [-0.012500,-0.012500,0.012500,0.012500,-0.012500,-0.012500; -0.420000,-0.420000,-0.420000,-0.366000,-0.366000,-0.420000];
        r_upper_leg2 = [-0.005650,-0.005650,0.005650,0.005650,-0.005650,-0.005650; -0.366000,-0.366000,-0.366000,-0.058000,-0.058000,-0.366000];
        r_upper_leg3 = [-0.012500,-0.012500,0.012500,0.012500,-0.012500,-0.012500; -0.058000,-0.058000,-0.058000,-0.011000,-0.011000,-0.058000];
        r_upper_leg4 = [-0.016500,-0.016500,0.016500,0.016500,-0.016500,-0.016500; -0.420000,-0.420000,-0.420000,-0.420000,-0.420000,-0.420000];
        r_upper_leg5 = [-0.006250,-0.006250,0.006250,0.006250,-0.006250,-0.006250; -0.420000,-0.420000,-0.420000,-0.420000,-0.420000,-0.420000];
        r_lower_leg1 = [-0.012500,-0.012500,0.012500,0.012500,-0.012500,-0.012500; -0.420000,-0.420000,-0.420000,-0.380000,-0.380000,-0.420000];
        r_lower_leg2 = [-0.005650,-0.005650,0.005650,0.005650,-0.005650,-0.005650; -0.380000,-0.380000,-0.380000,-0.072000,-0.072000,-0.380000];
        r_lower_leg3 = [-0.012500,-0.012500,0.012500,0.012500,-0.012500,-0.012500; -0.072000,-0.072000,-0.072000,-0.010000,-0.010000,-0.072000];
        r_foot1 = [-0.057500,-0.057500,0.172500,0.172500,-0.057500,-0.057500; -0.040000,-0.040000,-0.040000,-0.030000,-0.030000,-0.040000];
        r_foot2 = [-0.014000,-0.014000,0.014000,0.014000,-0.014000,-0.014000; -0.030000,-0.030000,-0.030000,0.000000,0.000000,-0.030000];
        l_upper_leg1 = [-0.012500,-0.012500,0.012500,0.012500,-0.012500,-0.012500; -0.420000,-0.420000,-0.420000,-0.366000,-0.366000,-0.420000];
        l_upper_leg2 = [-0.005650,-0.005650,0.005650,0.005650,-0.005650,-0.005650; -0.366000,-0.366000,-0.366000,-0.058000,-0.058000,-0.366000];
        l_upper_leg3 = [-0.012500,-0.012500,0.012500,0.012500,-0.012500,-0.012500; -0.058000,-0.058000,-0.058000,-0.011000,-0.011000,-0.058000];
        l_upper_leg4 = [-0.016500,-0.016500,0.016500,0.016500,-0.016500,-0.016500; -0.420000,-0.420000,-0.420000,-0.420000,-0.420000,-0.420000];
        l_upper_leg5 = [-0.006250,-0.006250,0.006250,0.006250,-0.006250,-0.006250; -0.420000,-0.420000,-0.420000,-0.420000,-0.420000,-0.420000];
        l_lower_leg1 = [-0.012500,-0.012500,0.012500,0.012500,-0.012500,-0.012500; -0.420000,-0.420000,-0.420000,-0.380000,-0.380000,-0.420000];
        l_lower_leg2 = [-0.005650,-0.005650,0.005650,0.005650,-0.005650,-0.005650; -0.380000,-0.380000,-0.380000,-0.072000,-0.072000,-0.380000];
        l_lower_leg3 = [-0.012500,-0.012500,0.012500,0.012500,-0.012500,-0.012500; -0.072000,-0.072000,-0.072000,-0.010000,-0.010000,-0.072000];
        l_foot1 = [-0.057500,-0.057500,0.172500,0.172500,-0.057500,-0.057500; -0.040000,-0.040000,-0.040000,-0.030000,-0.030000,-0.040000];
        l_foot2 = [-0.014000,-0.014000,0.014000,0.014000,-0.014000,-0.014000; -0.030000,-0.030000,-0.030000,0.000000,0.000000,-0.030000];
      end
      
      sfigure(hFig);
      clf;
      axis image;
      hold on;
      
      flipx = [-1 0 0; 0 1 0; 0 0 1];
      A1 = flipx*[ cos(Q(3)), -sin(Q(3)), -Q(1); sin(Q(3)), cos(Q(3)), Q(2); 0, 0, 1];
      for i=1:5
        a = A1 * [body1(:,i); 1]; n_body1(:,i) = a(1:end-1)/a(end);
        a = A1 * [body2(:,i); 1]; n_body2(:,i) = a(1:end-1)/a(end);
        a = A1 * [body3(:,i); 1]; n_body3(:,i) = a(1:end-1)/a(end);
        a = A1 * [body4(:,i); 1]; n_body4(:,i) = a(1:end-1)/a(end);
        a = A1 * [body5(:,i); 1]; n_body5(:,i) = a(1:end-1)/a(end);
        a = A1 * [body6(:,i); 1]; n_body6(:,i) = a(1:end-1)/a(end);
        a = A1 * [body7(:,i); 1]; n_body7(:,i) = a(1:end-1)/a(end);
        a = A1 * [body8(:,i); 1]; n_body8(:,i) = a(1:end-1)/a(end);
        a = A1 * [body9(:,i); 1]; n_body9(:,i) = a(1:end-1)/a(end);
        a = A1 * [body10(:,i); 1]; n_body10(:,i) = a(1:end-1)/a(end);
        a = A1 * [body11(:,i); 1]; n_body11(:,i) = a(1:end-1)/a(end);
        a = A1 * [body12(:,i); 1]; n_body12(:,i) = a(1:end-1)/a(end);
        a = A1 * [body13(:,i); 1]; n_body13(:,i) = a(1:end-1)/a(end);
        a = A1 * [body14(:,i); 1]; n_body14(:,i) = a(1:end-1)/a(end);
        a = A1 * [body15(:,i); 1]; n_body15(:,i) = a(1:end-1)/a(end);
        a = A1 * [body16(:,i); 1]; n_body16(:,i) = a(1:end-1)/a(end);
        a = A1 * [body17(:,i); 1]; n_body17(:,i) = a(1:end-1)/a(end);
        a = A1 * [body18(:,i); 1]; n_body18(:,i) = a(1:end-1)/a(end);
        a = A1 * [body19(:,i); 1]; n_body19(:,i) = a(1:end-1)/a(end);
        a = A1 * [body20(:,i); 1]; n_body20(:,i) = a(1:end-1)/a(end);
        a = A1 * [body21(:,i); 1]; n_body21(:,i) = a(1:end-1)/a(end);
        a = A1 * [body22(:,i); 1]; n_body22(:,i) = a(1:end-1)/a(end);
        a = A1 * [body23(:,i); 1]; n_body23(:,i) = a(1:end-1)/a(end);
        a = A1 * [body24(:,i); 1]; n_body24(:,i) = a(1:end-1)/a(end);
        a = A1 * [body25(:,i); 1]; n_body25(:,i) = a(1:end-1)/a(end);
        a = A1 * [body26(:,i); 1]; n_body26(:,i) = a(1:end-1)/a(end);
        a = A1 * [body27(:,i); 1]; n_body27(:,i) = a(1:end-1)/a(end);
        a = A1 * [body28(:,i); 1]; n_body28(:,i) = a(1:end-1)/a(end);
        a = A1 * [body29(:,i); 1]; n_body29(:,i) = a(1:end-1)/a(end);
        a = A1 * [body30(:,i); 1]; n_body30(:,i) = a(1:end-1)/a(end);
        a = A1 * [body31(:,i); 1]; n_body31(:,i) = a(1:end-1)/a(end);
        a = A1 * [body32(:,i); 1]; n_body32(:,i) = a(1:end-1)/a(end);
        a = A1 * [body33(:,i); 1]; n_body33(:,i) = a(1:end-1)/a(end);
      end
      fill(n_body1(1,:)',n_body1(2,:)',col);
      fill(n_body2(1,:)',n_body2(2,:)',col);
      fill(n_body3(1,:)',n_body3(2,:)',col);
      fill(n_body4(1,:)',n_body4(2,:)',col);
      fill(n_body5(1,:)',n_body5(2,:)',col);
      fill(n_body6(1,:)',n_body6(2,:)',col);
      fill(n_body7(1,:)',n_body7(2,:)',col);
      fill(n_body8(1,:)',n_body8(2,:)',col);
      fill(n_body9(1,:)',n_body9(2,:)',col);
      fill(n_body10(1,:)',n_body10(2,:)',col);
      fill(n_body11(1,:)',n_body11(2,:)',col);
      fill(n_body12(1,:)',n_body12(2,:)',col);
      fill(n_body13(1,:)',n_body13(2,:)',col);
      fill(n_body14(1,:)',n_body14(2,:)',col);
      fill(n_body15(1,:)',n_body15(2,:)',col);
      fill(n_body16(1,:)',n_body16(2,:)',col);
      fill(n_body17(1,:)',n_body17(2,:)',col);
      fill(n_body18(1,:)',n_body18(2,:)',col);
      fill(n_body19(1,:)',n_body19(2,:)',col);
      fill(n_body20(1,:)',n_body20(2,:)',col);
      fill(n_body21(1,:)',n_body21(2,:)',col);
      fill(n_body22(1,:)',n_body22(2,:)',col);
      fill(n_body23(1,:)',n_body23(2,:)',col);
      fill(n_body24(1,:)',n_body24(2,:)',col);
      fill(n_body25(1,:)',n_body25(2,:)',col);
      fill(n_body26(1,:)',n_body26(2,:)',col);
      fill(n_body27(1,:)',n_body27(2,:)',col);
      fill(n_body28(1,:)',n_body28(2,:)',col);
      fill(n_body29(1,:)',n_body29(2,:)',col);
      fill(n_body30(1,:)',n_body30(2,:)',col);
      fill(n_body31(1,:)',n_body31(2,:)',col);
      fill(n_body32(1,:)',n_body32(2,:)',col);
      fill(n_body33(1,:)',n_body33(2,:)',col);
      
      A2 = A1 * [ cos(Q(4)), -sin(Q(4)), 0; sin(Q(4)), cos(Q(4)), 0; 0, 0, 1];
      for i=1:5
        a = A2 * [r_upper_leg1(:,i); 1]; n_r_upper_leg1(:,i) = a(1:end-1)/a(end);
        a = A2 * [r_upper_leg2(:,i); 1]; n_r_upper_leg2(:,i) = a(1:end-1)/a(end);
        a = A2 * [r_upper_leg3(:,i); 1]; n_r_upper_leg3(:,i) = a(1:end-1)/a(end);
        a = A2 * [r_upper_leg4(:,i); 1]; n_r_upper_leg4(:,i) = a(1:end-1)/a(end);
        a = A2 * [r_upper_leg5(:,i); 1]; n_r_upper_leg5(:,i) = a(1:end-1)/a(end);
      end
      fill(n_r_upper_leg1(1,:)',n_r_upper_leg1(2,:)',col);
      fill(n_r_upper_leg2(1,:)',n_r_upper_leg2(2,:)',col);
      fill(n_r_upper_leg3(1,:)',n_r_upper_leg3(2,:)',col);
      fill(n_r_upper_leg4(1,:)',n_r_upper_leg4(2,:)',col);
      fill(n_r_upper_leg5(1,:)',n_r_upper_leg5(2,:)',col);
      
      A3 = A2 * [ cos(Q(5)), -sin(Q(5)), 0; sin(Q(5)), cos(Q(5)), -0.42; 0, 0, 1];
      for i=1:5
        a = A3 * [r_lower_leg1(:,i); 1]; n_r_lower_leg1(:,i) = a(1:end-1)/a(end);
        a = A3 * [r_lower_leg2(:,i); 1]; n_r_lower_leg2(:,i) = a(1:end-1)/a(end);
        a = A3 * [r_lower_leg3(:,i); 1]; n_r_lower_leg3(:,i) = a(1:end-1)/a(end);
      end
      fill(n_r_lower_leg1(1,:)',n_r_lower_leg1(2,:)',col);
      fill(n_r_lower_leg2(1,:)',n_r_lower_leg2(2,:)',col);
      fill(n_r_lower_leg3(1,:)',n_r_lower_leg3(2,:)',col);
      
      A4 = A3 * [ cos(Q(6)), -sin(Q(6)), 0; sin(Q(6)), cos(Q(6)), -0.42; 0, 0, 1];
      for i=1:5
        a = A4 * [r_foot1(:,i); 1]; n_r_foot1(:,i) = a(1:end-1)/a(end);
        a = A4 * [r_foot2(:,i); 1]; n_r_foot2(:,i) = a(1:end-1)/a(end);
      end
      fill(n_r_foot1(1,:)',n_r_foot1(2,:)',col);
      fill(n_r_foot2(1,:)',n_r_foot2(2,:)',col);
      
      A2 = A1 * [ cos(Q(7)), -sin(Q(7)), 0; sin(Q(7)), cos(Q(7)), 0; 0, 0, 1];
      for i=1:5
        a = A2 * [l_upper_leg1(:,i); 1]; n_l_upper_leg1(:,i) = a(1:end-1)/a(end);
        a = A2 * [l_upper_leg2(:,i); 1]; n_l_upper_leg2(:,i) = a(1:end-1)/a(end);
        a = A2 * [l_upper_leg3(:,i); 1]; n_l_upper_leg3(:,i) = a(1:end-1)/a(end);
        a = A2 * [l_upper_leg4(:,i); 1]; n_l_upper_leg4(:,i) = a(1:end-1)/a(end);
        a = A2 * [l_upper_leg5(:,i); 1]; n_l_upper_leg5(:,i) = a(1:end-1)/a(end);
      end
      fill(n_l_upper_leg1(1,:)',n_l_upper_leg1(2,:)',col);
      fill(n_l_upper_leg2(1,:)',n_l_upper_leg2(2,:)',col);
      fill(n_l_upper_leg3(1,:)',n_l_upper_leg3(2,:)',col);
      fill(n_l_upper_leg4(1,:)',n_l_upper_leg4(2,:)',col);
      fill(n_l_upper_leg5(1,:)',n_l_upper_leg5(2,:)',col);
      
      A3 = A2 * [ cos(Q(8)), -sin(Q(8)), 0; sin(Q(8)), cos(Q(8)), -0.42; 0, 0, 1];
      for i=1:5
        a = A3 * [l_lower_leg1(:,i); 1]; n_l_lower_leg1(:,i) = a(1:end-1)/a(end);
        a = A3 * [l_lower_leg2(:,i); 1]; n_l_lower_leg2(:,i) = a(1:end-1)/a(end);
        a = A3 * [l_lower_leg3(:,i); 1]; n_l_lower_leg3(:,i) = a(1:end-1)/a(end);
      end
      fill(n_l_lower_leg1(1,:)',n_l_lower_leg1(2,:)',col);
      fill(n_l_lower_leg2(1,:)',n_l_lower_leg2(2,:)',col);
      fill(n_l_lower_leg3(1,:)',n_l_lower_leg3(2,:)',col);
      
      A4 = A3 * [ cos(Q(9)), -sin(Q(9)), 0; sin(Q(9)), cos(Q(9)), -0.42; 0, 0, 1];
      for i=1:5
        a = A4 * [l_foot1(:,i); 1]; n_l_foot1(:,i) = a(1:end-1)/a(end);
        a = A4 * [l_foot2(:,i); 1]; n_l_foot2(:,i) = a(1:end-1)/a(end);
      end
      fill(n_l_foot1(1,:)',n_l_foot1(2,:)',col);
      fill(n_l_foot2(1,:)',n_l_foot2(2,:)',col);
      
      zoom = 1;
      line(Q(1)+[-zoom,zoom],[0,0],'Color',[0 0 0]);
      axis([Q(1)+[-zoom,zoom],Q(2)+[-zoom,zoom]]);
      title(sprintf('t = %3.2f',t));
      drawnow;
    end
  end
end
