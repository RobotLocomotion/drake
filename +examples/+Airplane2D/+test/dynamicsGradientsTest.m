function dynamicsGradientsTest()
% Tests user gradients vs TaylorVar gradients to check
% consistency (e.g., should break if you update
% the original function you autogenerated gradients for but
% forgot to re-generate the gradients.

import examples.Airplane2D.*;
load(fullfile(getDrakePath, '+examples', '+Airplane2D', '+test', 'dynamicsGradients.mat'));
in{1} = PlanePlant;
f1=cell(1,4);
[f1{:}]=geval(fun,in{:},struct('grad_method','user'));

f2=cell(1,4);
[f2{:}]=geval(fun,in{:},struct('grad_method','taylorvar'));

for i=1:4
  if (any(abs(f1{i}(:)-f2{i}(:))>1e-5))
    error('gradients don''t match!');
  end
end
