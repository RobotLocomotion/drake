---
title: Drake v0.30.0
released: YYYY-MM-DD
---

# Announcements

* TBD

# Breaking changes since v0.29.0

* Within Drake's event support, the arguments of the rarely-used handle()
  methods of PublishEvent, DiscreteUpdateEvent, and UnrestrictedUpdateEvent
  have changed. All now require a reference to the owning system as the first
  argument. ([#14969][_#14969], [#15032][_#15032])

* Several methods on drake::system::Diagram that were erroneously public have
  been made private. The affected methods are DoCalcTimeDerivatives() and
  DoCalcImplicitTimeDerivativesResidual(). Correct code should call
  CalcTimeDerivatives() and CalcImplicitTimeDerivativesResidual() instead.
  ([#15031][_#15031])

* Within Drake's geometry support, all overloads ContactSurface::EvaluateE_MN()
  have been deleted. ([#14904][_#14904])

* Drake has upgraded its libsdformat dependency to the latest release, 11.0.0.
  This is a breaking change in that <include> elements are no longer supported.
  In the future, this feature will be restored with revised semantics.  If you
  encounter issues with <include> elements in the interim, please notify Eric
  Cousineau. This is a breaking change in the sense that this release provides
  stricter validation of SDFormat input data, so bad files that used to parse
  without complaint now generate errors.  For example, the <pose> element now
  has more syntax checking than previously. ([#14852][_#14852])

# Changes since v0.29.0

## Dynamical Systems

<!-- <relnotes for systems go here> -->

New features

* Support scalar conversion by template parameter ([#14986][_#14986])
* Add compatibility checks for System methods using SystemOutput ([#15007][_#15007])
* Establish AffineSystem feedthrough without symbolics ([#15037][_#15037])

Fixes

* Reduce heap usage during Simulator advance steps ([#14912][_#14912], [#14950][_#14950], [#14969][_#14969], [#15032][_#15032], [#15010][_#15010])
* Fix image_to_lcm_image_array uninitialized data ([#14984][_#14984])
* Do not declare state variables in AffineSystem if num_states==0 ([#15003][_#15003])
* Deprecate and rename System::ValidateChildOfContext() ([#14999][_#14999])
* Make internal methods of Diagram private ([#15031][_#15031])

## Mathematical Program

<!-- <relnotes for solvers go here> -->

* TBD Set the string option in GurobiSolver ([#14930][_#14930])
* TBD Enable CLP to solve QP ([#14894][_#14894])
* TBD Warn about the memory issue when solving a QP with CLP ([#14934][_#14934])
* TBD solvers: Report error when snopt fails to set a solver parameter ([#14947][_#14947])

New features

* TBD

Fixes

* TBD

## Multibody Dynamics

<!-- <relnotes for geometry,multibody go here> -->

* TBD Implement PGS contact solver ([#14844][_#14844])  # PGS solver implements the ContactSolver interface. The algorithm follows that from the paper `Realistic Haptic Rendering of Interacting Deformable Objects in Virtual Environments` by Duriez et al. in 2005. Co-authored-by: Alejandro Castro <alejandro.castro@tri.global>
* TBD parsing: Improve model directives diagnostic when file not found ([#14923][_#14923])
* TBD Add ComPositionConstraint ([#14918][_#14918])
* TBD [multibody,doc,systems] doc: Restore missing C++ API images ([#14931][_#14931])
* TBD [geometry] Document QueryObject::ComputeContactSurfaces support Capsule ([#14935][_#14935])
* TBD Suppress PackageMap warning on different directory spellings ([#14939][_#14939])  # The spelling of a package path in the map isn't standardized/normalized at all, so this can happen fairly easily (e.g. if a trailing / is present or not).
* TBD Extend capsule documentation ([#14941][_#14941])  # There were some semantics of the capsule parameters which were *not* spelled out.
* TBD ik: use translational jacobian for position constraint ([#14945][_#14945])

* TBD [geometry,multibody,examples] [geometry] Allow meshes and fields to do
  mixed-scalar calculations (breaking change) ([#14904][_#14904]) # The key
  principle is that a mesh (and related calculations) can get unique scalar
  types from various quantities: - Position of vertices stored in the mesh. -
  Barycentric coordinates as parameter to methods. - Cartesian coordinates as
  parameter to methods. In the current implementation they must all be the
  same. But that doesn't support flexible computation. For example, a
  double-valued mesh, posed with AutoDiffXd-valued transform should produce
  AutoDiffXd-valued results in the posed frame. This is the kind of
  functionality we need to support. To this end: 1. Introduce the
  `mesh_traits.h` providing a compile-time utility for reconciling what the
  return type should be based on the various scalar types included in the
  calculation. 2. Reformulate the meshes so that the appropriate calculations
  can take mixed scalar types. - Also removed the no longer useful alias
  Cartesian and mutated the Barycentric alias to allow for independent scalar
  type. - Added unit tests to confirm that the mixing logic
  works. 3. Reformulate MeshFieldLinear so that it can also support
  mixed-scalar invocations. 4. Clean up ContactSurface. - Kill methods that
  wrapped public SurfaceMeshField APIs and just leave the getter for that
  field. - We don't *deprecate* the old methods, we simply delete them. This is
  consistent in that we consider hydroelastic to still be "under construction".

* TBD Hotfix: volume_mesh_test valgrind error ([#14955][_#14955])  # - The field value wasn't properly initialized for the autodiff-valued field (only the derivatives were initialized). - Also removed spurious references to capture values.

* TBD [multibody,tools] workspace: Upgrade libsdformat to latest release 11.0.0
  ([#14852][_#14852]) # This is a breaking change in that <include> elements
  are no longer supported.  In the future, this feature will be restored with
  revised semantics.  If you encounter issues with <include> elements in the
  interim, please notify Eric Cousineau. This is a breaking change in the sense
  that this release provides stricter validation of SDFormat input data, so bad
  files that used to parse without complaint now generate errors.  For example,
  the <pose> element now has more syntax checking than
  previously. Co-authored-by: "Addisu Z. Taddese" <addisu@openrobotics.org>
  Co-authored-by: "Eric Cousineau" <eric.cousineau@tri.global> Co-authored-by:
  "Sean Curtis" <sean.curtis@tri.global>

* TBD add CentroidalMomentumConstraint ([#14925][_#14925])
* TBD Implements SpaceXYZFloatingMobilizer ([#14961][_#14961])
* TBD proximity: Don't warn when parsing meshes with mtl files ([#14974][_#14974])
* TBD [geometry] Make soft half space/rigid mesh hydroelastic differentiable ([#14943][_#14943])  # This work is about 5% tweaking the implementation and 95% testing. 1. Modifications to the underlying algorithm - making sure use of scalars is consistent. - Guaranteeing that even with T = AutoDiffXd, BVH usage still works. - deleting the "AutoDiff throws" implementation. 2. Modifications to unit tests - Incidental renaming of test fixture to to ValueTest to have a clearer relationship to the new test. - Elimination of "Autodiff throws" unit test. - Introduction of tests on the derivatives of various quantities: - Area, vertex position, normal direction, pressure.
* TBD Fixes constness of JointActuator's SetRotorInertia() and SetGearRatio() ([#14983][_#14983])
* TBD Revert "[geometry] Make soft half space/rigid mesh hydroelastic differentiable (#14943)" ([#14995][_#14995])  # This reverts commit e9ef81e9e5b55cebb6ff031c12c33a9cd951ccad.
* TBD [geometry] Allow Plane and PoseHalfSpace to do mixed-scalar computation ([#14951][_#14951])  # Plane::CalcHeight() and PosedHalfSpace::CalcSignedDistance() can now support mixed numerical scalars (double and AutoDiffXd).
* TBD [geometry] Make rigid plane/soft mesh hydroelastic differentiable ([#14952][_#14952])  # This work is about 5% tweaking the implementation and 95% testing. 1. Modifications to the underlying algorithm - making sure use of scalars is consistent. - Guaranteeing that even with T = AutoDiffXd, BVH usage still works. - deleting the "AutoDiff throws" implementation. - incidental correction of notation error. I had frame P instead of R. 2. Modifications to unit tests - Elimination of "Autodiff throws" unit test. - Introduction of tests on the derivatives of various quantities: - Area, vertex position, normal direction, pressure.
* TBD [geometry] Make soft half space/rigid mesh hydroelastic differentiable ([#14998][_#14998])  # This work is about 5% tweaking the implementation and 95% testing. 1. Modifications to the underlying algorithm - making sure use of scalars is consistent. - Guaranteeing that even with T = AutoDiffXd, BVH usage still works. - deleting the "AutoDiff throws" implementation. 2. Modifications to unit tests - Incidental renaming of test fixture to to ValueTest to have a clearer relationship to the new test. - Elimination of "Autodiff throws" unit test. - Introduction of tests on the derivatives of various quantities: - Area, vertex position, normal direction, pressure.
* TBD Add ComInPolyhedronConstraint ([#14946][_#14946])
* TBD Total mass of MBP or model instances ([#14957][_#14957])  # Calculate the total mass of a MultibodyPlant or designated model instances to resolve issue #14913.
* TBD Add QuaternionEulerIntegrationConstraint ([#14960][_#14960])  # Add QuaternionEulerIntegrationConstraint
* TBD multibody: Defer joint limits warning until it's relevant ([#15017][_#15017])  # This allows for creating kinematic models for planning using a zero time step, while avoiding console spam.
* TBD [geometry] Update mesh-mesh (rigid-soft) intersection to support AutoDiffXd ([#15012][_#15012])  # - Update all signatures - update the test to reflect the updated signatures - Kill the old "AutoDiffXd throws" test - Add full derivative testing The unit test is a *direct* rip off of the plane-mesh intersection test. We replace the rigid plane with a rigid triangle, but otherwise all the math should be the same.
* TBD [geometry,systems] geometry/render: Move vtk_util here ([#15025][_#15025])  # Per the TODO in systems/sensors, this library is only used within geometry/render now so should live there.
* TBD [geometry,systems,perception] sensors: Deprecate InvalidDepth and Label constants ([#15027][_#15027])
* TBD Implements BlockSparseMatrix ([#14994][_#14994])
* TBD Implements ComputeDfsPermutation() ([#14975][_#14975])
* TBD multibody_tree: Fix missing space for GetModelInstanceByName error ([#15042][_#15042])

New features

* TBD

Fixes

* TBD

## Tutorials and examples

<!-- <relnotes for examples,tutorials go here> -->

* TBD manipulation_station: Add LCM cameras to mock simulation ([#14982][_#14982])
* TBD

## Miscellaneous features and fixes

<!-- <relnotes for common,math,lcm,lcmtypes,manipulation,perception go here> -->

* TBD manipulation: Remove deprecated trajectory_utils 2021-05 ([#14989][_#14989])
* TBD New method for forming a rotation matrix from a single unit vector ([#14816][_#14816])  # Provide two new static methods on RotationMatrix to create a RotationMatrix (i.e., basis) from a single vector. This should eventually replace the function in orthonormal_basis.h as this is more robust and faster. The two variants are the user-friendly "we'll normalize the vector for you" and the advanced "you're sure the vector is already normalized?" variants.
* TBD Move the long definition of MakeFromOneUnitVector from header to .cc file ([#15011][_#15011])  # This also includes a patch to help the test pass on mac. Apparently, on mac fmt::format("{}", 1.0) prints "1" and on linux it prints "1.0". The test has been patched to accept both.
* TBD [hotfix] Further correct mac fmt::format behavior in rotation matrix test ([#15015][_#15015])
* TBD [math,geometry] Add AVX infrastructure and one AVX method ([#15013][_#15013])
* TBD

## pydrake bindings

<!-- <relnotes for bindings go here> -->

* TBD py autodiff: Add autodiff_equal_to ([#14937][_#14937])
* TBD Add Python binding for GetForceElement ([#14953][_#14953])  # * Add Python binding for MbP::get_force_element()
* TBD pydrake: Add __repr__ to several classes ([#14959][_#14959])  # Specifically, add __repr__ for: - pydrake.geometry.DrakeVisualizerParams - pydrake.perception.Fields - pydrake.systems.analysis.InitializeParams - pydrake.systems.analysis.RegionOfAttractionOptions - pydrake.systems.controllers.FiniteHorizonLinearQuadraticRegulatorOptions - pydrake.systems.framework.UseDefaultName
* TBD Add bindings for IiwaCommand/Status Sender/Receivers ([#14987][_#14987])
* TBD Add back frame visualization in Meshcat ([#14979][_#14979])
* TBD pydrake: Add repr for RotationMatrix, RigidTransform ([#14993][_#14993])
* TBD pydrake: Clarify tests for SolverInterface::Solve ([#15036][_#15036])  # The prior unit test was pretending an argument-mismatch exception was a "cannot solve" message.  Here instead, we try to slightly more carefully illustrate what a solver back-end in Python should maybe look like.

New features

* TBD

Fixes

* TBD

Newly bound

* TBD

## Build system and dependencies

<!-- <relnotes for cmake,doc,setup,third_party,tools go here> -->

* TBD Fix sitemap.xml entries for index pages ([#14909][_#14909])
* TBD doc: Add release notes v0.29.0 ([#14881][_#14881])
* TBD doc: Fix incorrect link in release notes v0.29.0 ([#14921][_#14921])
* TBD Bump VGT with raycasting performance improvements ([#14919][_#14919])  # and improve consistency handling empty pointclouds
* TBD doc: Fix release notes template to unpin old version ([#14922][_#14922])
* TBD [doc,multibody,systems,manipulation,solvers] Add more @ingroup tags to doxygen to improve discoverability ([#14911][_#14911])
* TBD doc: Refactor Doxygen builds to use common code ([#14834][_#14834])  # * doc: Refactor Doxygen build to use common code
* TBD valgrind suppressions for system version of libclp ([#14933][_#14933])  # Addresses nightly build failures following PR #14392.
* TBD doc: Rewrite generation instructions and top-level build script ([#14954][_#14954])  # Remove manual_binaries filegroup; it is no longer used by drake-ci. Change regression tests to use submodules for quicker turn-around.
* TBD workspace: Upgrade tinyobjloader to latest commit ([#14958][_#14958])  # Rewrite the faster_float_parsing patch to use a simple #if / #endif to disable upstream code instead of a deleting it, so the patch doesn't need to track upstream bugfixes.
* TBD Do not pass --upgrade to pip3.9 on macOS ([#14962][_#14962])
* TBD workspace: Upgrade buildifier to latest release 4.0.1 ([#14964][_#14964])
* TBD workspace: Upgrade googlebenchmark to latest release ([#14965][_#14965])  # Remove warnings patch (upstream fixed this issue a couple of point releases ago).
* TBD workspace: Upgrade rules_python to latest release 0.2.0 ([#14966][_#14966])
* TBD workspace: Upgrade scs to latest release 2.1.3 ([#14970][_#14970])
* TBD drake_visualizer: Factor out package.BUILD.bazel file ([#14976][_#14976])  # This resolves the nearby TODO, and will make for clearer diffs and linting. Co-authored-by: Eric Cousineau <eric.cousineau@tri.global> Co-authored-by: Jamie Snape <jamie.snape@kitware.com>
* TBD drake_visualizer: Use Drake's native lcmtypes for builtin_scripts ([#14981][_#14981])  # Do not use the (deprecated) RobotLocomotion/lcmtypes.
* TBD add link to blog post from the drake website ([#15001][_#15001])
* TBD workspace: Disable voxelized_geometry_tools unit test ([#15005][_#15005])  # It no longer passes on macOS after the latest Apple upgrade.
* TBD Website: Fix typo on Docker page ([#15016][_#15016])
* TBD Website: Add apt-get instructions to from_binary page ([#15016][_#15016])
* TBD workspace: Upgrade lcm to latest commit ([#15023][_#15023])
* TBD [tools,examples] [visualization] Fix bug in hydroelastic visualization ([#15000][_#15000])  # * Fix bug in hydroelastic visualization Fix 14578. Make sure that contact spatial force is no longer duplicated in hydroelastic visualization. Modify the simple_contact_surface_vis example so that it verifies the fix. Make two other incremental improvements to hydroelastic visualization: 1. Instead of visualizing the contact surfaces as two offset surfaces, visualize the actual contact surface as a single entry in scene browser 2. Give more descriptive names to the contact data entries in the scene browser and group them by contact surfaces.
* TBD

## Newly-deprecated APIs

* TBD
* drake::systems::System::ValidateChildOfContext() ([#14999][_#14999])

## Removal of deprecated items

* TBD

# Notes


This release provides [pre-compiled binaries](https://github.com/RobotLocomotion/drake/releases/tag/v0.30.0) named
``drake-YYYYMMDD-{bionic|focal|mac}.tar.gz``. See [Nightly Releases](/from_binary.html#nightly-releases) for instructions on how to use them.

Drake binary releases incorporate a pre-compiled version of [SNOPT](https://ccom.ucsd.edu/~optimizers/solvers/snopt/) as part of the
[Mathematical Program toolbox](https://drake.mit.edu/doxygen_cxx/group__solvers.html). Thanks to
Philip E. Gill and Elizabeth Wong for their kind support.

<!-- <begin issue links> -->
[_#14816]: https://github.com/RobotLocomotion/drake/pull/14816
[_#14834]: https://github.com/RobotLocomotion/drake/pull/14834
[_#14844]: https://github.com/RobotLocomotion/drake/pull/14844
[_#14852]: https://github.com/RobotLocomotion/drake/pull/14852
[_#14881]: https://github.com/RobotLocomotion/drake/pull/14881
[_#14894]: https://github.com/RobotLocomotion/drake/pull/14894
[_#14904]: https://github.com/RobotLocomotion/drake/pull/14904
[_#14909]: https://github.com/RobotLocomotion/drake/pull/14909
[_#14911]: https://github.com/RobotLocomotion/drake/pull/14911
[_#14912]: https://github.com/RobotLocomotion/drake/pull/14912
[_#14918]: https://github.com/RobotLocomotion/drake/pull/14918
[_#14919]: https://github.com/RobotLocomotion/drake/pull/14919
[_#14921]: https://github.com/RobotLocomotion/drake/pull/14921
[_#14922]: https://github.com/RobotLocomotion/drake/pull/14922
[_#14923]: https://github.com/RobotLocomotion/drake/pull/14923
[_#14925]: https://github.com/RobotLocomotion/drake/pull/14925
[_#14929]: https://github.com/RobotLocomotion/drake/pull/14929
[_#14930]: https://github.com/RobotLocomotion/drake/pull/14930
[_#14931]: https://github.com/RobotLocomotion/drake/pull/14931
[_#14933]: https://github.com/RobotLocomotion/drake/pull/14933
[_#14934]: https://github.com/RobotLocomotion/drake/pull/14934
[_#14935]: https://github.com/RobotLocomotion/drake/pull/14935
[_#14937]: https://github.com/RobotLocomotion/drake/pull/14937
[_#14939]: https://github.com/RobotLocomotion/drake/pull/14939
[_#14941]: https://github.com/RobotLocomotion/drake/pull/14941
[_#14943]: https://github.com/RobotLocomotion/drake/pull/14943
[_#14945]: https://github.com/RobotLocomotion/drake/pull/14945
[_#14946]: https://github.com/RobotLocomotion/drake/pull/14946
[_#14947]: https://github.com/RobotLocomotion/drake/pull/14947
[_#14950]: https://github.com/RobotLocomotion/drake/pull/14950
[_#14951]: https://github.com/RobotLocomotion/drake/pull/14951
[_#14952]: https://github.com/RobotLocomotion/drake/pull/14952
[_#14953]: https://github.com/RobotLocomotion/drake/pull/14953
[_#14954]: https://github.com/RobotLocomotion/drake/pull/14954
[_#14955]: https://github.com/RobotLocomotion/drake/pull/14955
[_#14957]: https://github.com/RobotLocomotion/drake/pull/14957
[_#14958]: https://github.com/RobotLocomotion/drake/pull/14958
[_#14959]: https://github.com/RobotLocomotion/drake/pull/14959
[_#14960]: https://github.com/RobotLocomotion/drake/pull/14960
[_#14961]: https://github.com/RobotLocomotion/drake/pull/14961
[_#14962]: https://github.com/RobotLocomotion/drake/pull/14962
[_#14964]: https://github.com/RobotLocomotion/drake/pull/14964
[_#14965]: https://github.com/RobotLocomotion/drake/pull/14965
[_#14966]: https://github.com/RobotLocomotion/drake/pull/14966
[_#14969]: https://github.com/RobotLocomotion/drake/pull/14969
[_#14970]: https://github.com/RobotLocomotion/drake/pull/14970
[_#14974]: https://github.com/RobotLocomotion/drake/pull/14974
[_#14975]: https://github.com/RobotLocomotion/drake/pull/14975
[_#14976]: https://github.com/RobotLocomotion/drake/pull/14976
[_#14979]: https://github.com/RobotLocomotion/drake/pull/14979
[_#14981]: https://github.com/RobotLocomotion/drake/pull/14981
[_#14982]: https://github.com/RobotLocomotion/drake/pull/14982
[_#14983]: https://github.com/RobotLocomotion/drake/pull/14983
[_#14984]: https://github.com/RobotLocomotion/drake/pull/14984
[_#14986]: https://github.com/RobotLocomotion/drake/pull/14986
[_#14987]: https://github.com/RobotLocomotion/drake/pull/14987
[_#14989]: https://github.com/RobotLocomotion/drake/pull/14989
[_#14993]: https://github.com/RobotLocomotion/drake/pull/14993
[_#14994]: https://github.com/RobotLocomotion/drake/pull/14994
[_#14995]: https://github.com/RobotLocomotion/drake/pull/14995
[_#14998]: https://github.com/RobotLocomotion/drake/pull/14998
[_#14999]: https://github.com/RobotLocomotion/drake/pull/14999
[_#15000]: https://github.com/RobotLocomotion/drake/pull/15000
[_#15001]: https://github.com/RobotLocomotion/drake/pull/15001
[_#15003]: https://github.com/RobotLocomotion/drake/pull/15003
[_#15005]: https://github.com/RobotLocomotion/drake/pull/15005
[_#15007]: https://github.com/RobotLocomotion/drake/pull/15007
[_#15010]: https://github.com/RobotLocomotion/drake/pull/15010
[_#15011]: https://github.com/RobotLocomotion/drake/pull/15011
[_#15012]: https://github.com/RobotLocomotion/drake/pull/15012
[_#15013]: https://github.com/RobotLocomotion/drake/pull/15013
[_#15015]: https://github.com/RobotLocomotion/drake/pull/15015
[_#15016]: https://github.com/RobotLocomotion/drake/pull/15016
[_#15017]: https://github.com/RobotLocomotion/drake/pull/15017
[_#15023]: https://github.com/RobotLocomotion/drake/pull/15023
[_#15025]: https://github.com/RobotLocomotion/drake/pull/15025
[_#15027]: https://github.com/RobotLocomotion/drake/pull/15027
[_#15031]: https://github.com/RobotLocomotion/drake/pull/15031
[_#15032]: https://github.com/RobotLocomotion/drake/pull/15032
[_#15036]: https://github.com/RobotLocomotion/drake/pull/15036
[_#15037]: https://github.com/RobotLocomotion/drake/pull/15037
[_#15042]: https://github.com/RobotLocomotion/drake/pull/15042
<!-- <end issue links> -->

<!--
  Current oldest_commit a939b72dfd547f7f2cfb145f400408e4e1423e46 (exclusive).
  Current newest_commit 00885ee977054f1a44b46311f8c6f1784da032a6 (inclusive).
-->
