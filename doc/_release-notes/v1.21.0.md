---
title: Drake v1.21.0
date: YYYY-MM-DD
released: YYYY-MM-DD
---

# Announcements

* TBD

# Breaking changes since v1.20.0

* TBD

Refer to our [Drake Stability Guidelines](/stable.html) for our policy
on API changes.

# Changes since v1.20.0

## Dynamical Systems

<!-- <relnotes for systems go here> -->


New features

* Support default scalars for TrajectorySource ([#19967][_#19967])
* Add to_string and PixelScalarBoth to be soon used as part of a new consolidated image I/O feature ([#20015][_#20015])
* Add an initialization event to LcmSubscriberSystem ([#20072][_#20072])
* Adjust "sole port" getters to work around deprecation ([#20090][_#20090])

Fixes

* Set subsystem names within InverseDynamicsController ([#20078][_#20078])
* Use descriptive InverseDynamics port names ([#20079][_#20079])
* Indicate deprecated ports in Graphviz output ([#20080][_#20080])
* Fix exception from empty renderer_class config ([#20087][_#20087])

## Mathematical Program

<!-- <relnotes for solvers go here> -->

New features

* Handle converting HPolyhedron to VPolytope if it is not full dimensional ([#20001][_#20001])

Fixes

* TBD

## Multibody Dynamics and Geometry

<!-- <relnotes for geometry,multibody go here> -->


New features

* Add MultibodyPlant::GetDefaultPositions() ([#19204][_#19204])
* Add lights to RenderEngineVtkParams ([#19948][_#19948])
* RenderEngineVtk consumes and renders glTF ([#19961][_#19961])
* Configure camera position from Meshcat ([#19968][_#19968])
* Support ApplyMultibodyPlantConfig for an existing MultibodyPlant([#20071][_#20071])

Fixes

* Fix friction in CalcHydroelasticContactForces in continuous mode simulation ([#20022][_#20022])
* Fix RenderEngineVtk upside down glTF textures ([#20089][_#20089])

## Planning

<!-- <relnotes for planning go here> -->


New features

* Implement planning::VisibilityGraph() ([#19914][_#19914])

Fixes

* TBD

## Tutorials and examples

<!-- <relnotes for examples,tutorials go here> -->

* Assign missing texture colors in manipulation station ([#20096][_#20096])

## Miscellaneous features and fixes

<!-- <relnotes for common,math,lcm,lcmtypes,manipulation,perception,visualization go here> -->

* Adapat TRI's internal `Parallelism` for Drake ([#20093][_#20093])
* Port PointCloud to new Parallelism API ([#20093][_#20093])
* Fix some awkward grammar in an error message ([#20060][_#20060])
* Improve error message for DecomposeLinearExpression and DecomposeAffineExpression ([#20065][_#20065])
* Rewrite the DARE solver to use a faster algorithm ([#20104][_#20104])

## pydrake bindings

<!-- <relnotes for bindings go here> -->

New features

* Add bindings for CspaceFreePolytope methods ([#19574][_#19574])
* Add binding for Systems::ValidateContext ([#20073][_#20073])
* Add bindings for LcmInterfaceSystem methods ([#20074][_#20074])
* Add bindings for MultibodyPlant::CalcGeneralizedForce() ([#20102][_#20102])

Fixes

* Add missing py_reference_internal ([#20050][_#20050])
* Improve error message for missing witness functions ([#20106][_#20106])
* Bind Formula(bool) constructor ([#20119][_#20119])

## Build system

<!-- <relnotes for cmake,doc,setup,third_party,tools go here> -->

* Change clang-format to a testonly dependency ([#20028][_#20028])
* Provide opt-in/opt-out flags for installing Bazel ([#20046][_#20046])
* Add vendored copy of bazelisk ([#20064][_#20064])
* Use bazelisk to download bazel on linux ([#20064][_#20064])
* Use bazelisk to download bazel if necessary ([#20064][_#20064])
* Fix model_visualizer --show_rgbd_sensor ([#20112][_#20112])

## Build dependencies

<!-- <relnotes for workspace go here> -->

* Upgrade to gurobi 10 ([#19766][_#19766])
* Update meshcat to include resizable control panel ([#20000][_#20000])
* Upgrade meshcat to latest commit ([#20021][_#20021])
* Add bazelisk as a new dependency ([#20064][_#20064])
* Add vtk_internal build from source ([#20068][_#20068])

## Newly-deprecated APIs

* `drake::multibody::Parser::AddAllModelsFromFile`([#19978][_#19978])
* `drake::multibody::Parser::AddModelFromFile`([#19978][_#19978])
* `drake::systems::sensors::Image<drake::systems::sensors::PixelType::kExpr>` ([#20023][_#20023])
* `drake::systems::sensors::PixelFormat::kExpr` ([#20023][_#20023])
* `drake::systems::sensors::PixelType::kExpr` ([#20023][_#20023])
* `drake::systems::controllers::InverseDynamics` input port name `u0` is changed to `estimated_state` ([#20079][_#20079])
* `drake::systems::controllers::InverseDynamics` input port name `u1` is changed to `desired_acceleration` ([#20079][_#20079])
* `drake::systems::controllers::InverseDynamics` output port name `y0` is changed to `generalized_force` ([#20079][_#20079])
* `drake::systems::controllers::InverseDynamics::get_output_port_force` ([#20079][_#20079])
* `drake::lcm::DrakeLcm::get_lcm_instance` ([#20115][_#20115])

## Removal of deprecated items

* `drake::geometry::optimization::GetCollisionGeometries` ([#20085][_#20085])
* `drake::planning::MultipleShooting::timestep` ([#20085][_#20085])
* `drake::planning::MultipleShooting::fixed_timestep` ([#20085][_#20085])
* `drake::planning::MultipleShooting::timesteps_are_decision_variables` ([#20085][_#20085])
* `drake::solvers::SolutionResult::kUnknownError` ([#20085][_#20085])
* `drake::systems::lcm::Serializer::Clone` ([#20085][_#20085])
* `drake::visualization::ApplyVisualizationConfig` overload taking a const SceneGraph ([#20085][_#20085])
* `pydrake.planning.AddDirectCollocationConstraint(timestep=...)` ([#20085][_#20085])
* `pydrake.planning.DirectCollocation(minimum_timestep=..., maximum_timestep=...)` ([#20085][_#20085])
* `pydrake.planning.DirectTranscription(fixed_timestep=...)` ([#20085][_#20085])
* `pydrake.systems.primitives.DiscreteTimeDelay(delay_timesteps=...)`  ([#20085][_#20085])


# Notes


This release provides [pre-compiled binaries](https://github.com/RobotLocomotion/drake/releases/tag/v1.21.0) named
``drake-YYYYMMDD-{focal|jammy|mac|mac-arm64}.tar.gz``. See [Stable Releases](/from_binary.html#stable-releases) for instructions on how to use them.

Drake binary releases incorporate a pre-compiled version of [SNOPT](https://ccom.ucsd.edu/~optimizers/solvers/snopt/) as part of the
[Mathematical Program toolbox](https://drake.mit.edu/doxygen_cxx/group__solvers.html). Thanks to
Philip E. Gill and Elizabeth Wong for their kind support.

<!-- <begin issue links> -->
[_#19204]: https://github.com/RobotLocomotion/drake/pull/19204
[_#19574]: https://github.com/RobotLocomotion/drake/pull/19574
[_#19766]: https://github.com/RobotLocomotion/drake/pull/19766
[_#19914]: https://github.com/RobotLocomotion/drake/pull/19914
[_#19948]: https://github.com/RobotLocomotion/drake/pull/19948
[_#19961]: https://github.com/RobotLocomotion/drake/pull/19961
[_#19967]: https://github.com/RobotLocomotion/drake/pull/19967
[_#19968]: https://github.com/RobotLocomotion/drake/pull/19968
[_#19978]: https://github.com/RobotLocomotion/drake/pull/19978
[_#20000]: https://github.com/RobotLocomotion/drake/pull/20000
[_#20001]: https://github.com/RobotLocomotion/drake/pull/20001
[_#20015]: https://github.com/RobotLocomotion/drake/pull/20015
[_#20021]: https://github.com/RobotLocomotion/drake/pull/20021
[_#20022]: https://github.com/RobotLocomotion/drake/pull/20022
[_#20023]: https://github.com/RobotLocomotion/drake/pull/20023
[_#20028]: https://github.com/RobotLocomotion/drake/pull/20028
[_#20046]: https://github.com/RobotLocomotion/drake/pull/20046
[_#20050]: https://github.com/RobotLocomotion/drake/pull/20050
[_#20060]: https://github.com/RobotLocomotion/drake/pull/20060
[_#20064]: https://github.com/RobotLocomotion/drake/pull/20064
[_#20065]: https://github.com/RobotLocomotion/drake/pull/20065
[_#20068]: https://github.com/RobotLocomotion/drake/pull/20068
[_#20071]: https://github.com/RobotLocomotion/drake/pull/20071
[_#20072]: https://github.com/RobotLocomotion/drake/pull/20072
[_#20073]: https://github.com/RobotLocomotion/drake/pull/20073
[_#20074]: https://github.com/RobotLocomotion/drake/pull/20074
[_#20078]: https://github.com/RobotLocomotion/drake/pull/20078
[_#20079]: https://github.com/RobotLocomotion/drake/pull/20079
[_#20080]: https://github.com/RobotLocomotion/drake/pull/20080
[_#20085]: https://github.com/RobotLocomotion/drake/pull/20085
[_#20087]: https://github.com/RobotLocomotion/drake/pull/20087
[_#20089]: https://github.com/RobotLocomotion/drake/pull/20089
[_#20090]: https://github.com/RobotLocomotion/drake/pull/20090
[_#20093]: https://github.com/RobotLocomotion/drake/pull/20093
[_#20096]: https://github.com/RobotLocomotion/drake/pull/20096
[_#20102]: https://github.com/RobotLocomotion/drake/pull/20102
[_#20104]: https://github.com/RobotLocomotion/drake/pull/20104
[_#20106]: https://github.com/RobotLocomotion/drake/pull/20106
[_#20112]: https://github.com/RobotLocomotion/drake/pull/20112
[_#20115]: https://github.com/RobotLocomotion/drake/pull/20115
[_#20119]: https://github.com/RobotLocomotion/drake/pull/20119
<!-- <end issue links> -->

<!--
  Current oldest_commit 75114dca8d860814de4185e1471820a25078eb84 (exclusive).
  Current newest_commit 2fbfa1f6ca8d50fb3d79cca42de4cd557efa6ab1 (inclusive).
-->
