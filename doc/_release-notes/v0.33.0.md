g---
title: Drake v0.33.0
released: YYYY-MM-DD
---

# Announcements

* TBD

# Breaking changes since v0.32.0

* The ``drake/examples/pendulum/Pendulum.urdf`` now includes a weld joint ([#15426][_#15426]).
  * Users who were adding the weld by hand and should remove their weld.
* The ``drake::systems::lcm::SerializerInterface`` has a new pure-virtual method for ``Clone`` ([#15394][_#15394]).
  * Users who were extending it directly (rather than using the concrete ``Serializer`` class) should to implement the new method.
* TBD [geometry] Adds new public API for manipulating collision filters (breaking) ([#15348][_#15348])  # - Adds the CollisionFilterManager class - including python bindings - Binds the previously unbound CollisionFilterDeclaration (now that there is a public API to consume it). - Move some documentation from CollisionFilterDeclaration to CollisionFilterManager - GeometryState completely loses its legacy API (ExcludeCollisionsWithin and ExcludeCollisionBetween). This is *technically* breaking because GeometryState is erroneously in the geometry namespace. But no one actually accesses the class. It is *functionally* internal. - SceneGraph offers API access to the CollisionFilterManager - Labels the old API as "legacy". - old API expressed in terms of collision filter manager. - Documentation that referenced legacy API updated. - SceneGraphInspector

# Changes since v0.32.0

## Dynamical Systems

<!-- <relnotes for systems go here> -->

New features

* Support fixed input ports in RegionOfAttraction ([#15425][_#15425])
* LCM's SerializerInterface is now cloneable ([#15394][_#15394])
* Add VectorLog storage class ([#15484][_#15484])

Fixes

* Improve the performance (i.e., reduce the overhead) of vector-valued ports ([#15431][_#15431], [#15432][_#15432], [#15470][_#15470])

## Mathematical Program

<!-- <relnotes for solvers go here> -->

New features

* MathematicalProgram can report its ProgramType enum ([#15340][_#15340])
* MathematicalProgram allows removing constraints ([#15350][_#15350])
* Many improvements to configurations for debugging:
  * Improve printing for Expression and Lorentz cone constraints ([#15472][_#15472]) ([#15475][_#15475])
  * GurobiSolver now support GRBcomputeIIS and GRBwrite options ([#15438][_#15438])
  * IpoptSolver now supports the kPrintToConsole option ([#15502][_#15502])
  * MosekSolver now support kPrintToConsole and kPrintFileName options ([#15399][_#15399])
  * OsqpSolver now supports the kPrintToConsole option ([#15501][_#15501])
  * Solver options offers new sugar to get_print_to_console and get_print_file_name ([#15473][_#15473])
* Improvements to the new geometry/optimization module:
  * Make Point mutable ([#15368][_#15368])
  * Add ConvexSet::IntersectsWith ([#15372][_#15372])
  * Add HPolyhedron::CartesianPower ([#15371][_#15371])
  * Add GraphOfConvexSets ([#15413][_#15413])
  * Add IrisInConfigurationSpace ([#15476][_#15476])
  * Add SolveShortestPath to GraphOfConvexSets ([#15483][_#15483])

Fixes

* Reject NaNs in Constraint bounds ([#15391][_#15391])
* Reject non-finite values in LinearConstraint A matrix ([#15391][_#15391])
* GurobiSolver throws when an option is set incorrectly ([#15412][_#15412])
* MosekSolver throws when an option is set incorrectly ([#15411][_#15411])

## Multibody Dynamics and Geometry

<!-- <relnotes for geometry,multibody go here> -->

* TBD [geometry] Adds new public API for manipulating collision filters (breaking) ([#15348][_#15348])  # - Adds the CollisionFilterManager class - including python bindings - Binds the previously unbound CollisionFilterDeclaration (now that there is a public API to consume it). - Move some documentation from CollisionFilterDeclaration to CollisionFilterManager - GeometryState completely loses its legacy API (ExcludeCollisionsWithin and ExcludeCollisionBetween). This is *technically* breaking because GeometryState is erroneously in the geometry namespace. But no one actually accesses the class. It is *functionally* internal. - SceneGraph offers API access to the CollisionFilterManager - Labels the old API as "legacy". - old API expressed in terms of collision filter manager. - Documentation that referenced legacy API updated. - SceneGraphInspector
* TBD Allow model_instances for MBP::CalcJacobianCenterOfMassTranslationalVelocity() ([#15387][_#15387])
* TBD [geometry] QueryObject's new queries for hydroelastics ([#15210][_#15210])  # Adds two new queries to QueryObject -- the tentative API to access the "polygonal" contact surface. This API is a place holder; it's return type will change. Implementing this now is merely a convenience so end users can benefit from performance improvements without waiting for the new infrastructure.
* TBD [render] Respect (renderer, accepting) for post-hoc renderers ([#15448][_#15448])  # * Respect (renderer, accepting) for post-hoc renderers When a renderer is added to SceneGraph *after* geometry was registered, the (renderer, accepting) property wasn't respected. That led, in rare cases where the property was used, that geometries would end up in the wrong render engines. This makes sure that the property is respected.
* TBD [multibody] Avoid Eigen::Block<Eigen::Ref<VectorX>> ([#15451][_#15451])  # Using a pointer to a pointer is extremely prone to use-after-free errors when the interior pointer changes through the call sequence.  Just one pointer indirection is plenty to denote what we intend.
* TBD parsing: Fix joint pose computation when using frames as joint parent or child ([#15290][_#15290])
* TBD [geometry] Add declaration to *remove* collision filters ([#15415][_#15415])  # Previous API only allowed for *adding* filters on geometry pairs. This introduces the API that can allow (generally) the removal of a filter from a geometry pair. This introduces the concept of the "permanent" filter. It supports scene graph invariants (e.g., geometries affixed to the same frame are always filtered, etc.) This concept is purely internal -- it doesn't affect the public API. The code changes include: - CollisionFilterDeclaration gets new statement methods. - CollisionFilter learns how to apply them. - CollisionFilterManager documents the "invariant" filters. - Touch numerous tests that depend on having a collision filter. - Python bindings for new API.
* TBD [geometry] Select output format from mesh_half_space_intersection in hydroelastics ([#15358][_#15358])

New features

* TBD

Fixes

* TBD

## Tutorials and examples

<!-- <relnotes for examples,tutorials go here> -->

* Include weld joint in Pendulum.urdf ([#15426][_#15426])

## Miscellaneous features and fixes

<!-- <relnotes for common,math,lcm,lcmtypes,manipulation,perception go here> -->

* TBD [math] Add DARE overload that takes Q, R, and N cost matrices ([#15352][_#15352])
* TBD [lcm] Give DrakeLcm the ability to defer launching its thread ([#15390][_#15390])  # This can be useful if the scheduling configuration for new threads varies between the construction time and and first use.
* TBD [common] Add Value::maybe_get_mutable_value ([#15418][_#15418])  # Note that we don't need to bind this in pydrake; with dynamic typing, there is no need for a "maybe" flavor of the getters.
* TBD [py trajectories] support passing matrix coefficients to ZeroOrderHold ([#15433][_#15433])  # Related to #15427
* TBD [common] Add another Eigen::numext specialization for Expression ([#15452][_#15452])  # Commit 9d4fd1a0ed02451eb50fe0775eb6f843f16e5ab3 added not_equal_strict, but we also need equal_strict for Eigen 3.4 compatibility.
* TBD [common] Fine tune {not_,}equal_strict<Expression> for Eigen 3.4 ([#15453][_#15453])  # In various Eigen algorithms, it uses "short-circuit when zero" guards to skip computationally expensive steps in cases where knows the end result will remain unchanged. When we have Expressions filled with only constants, this works fine. However, when we have Expressions filled with Variables, trying to check for zero throws an exception because the resulting Formula cannot convert to back to a bool -- and in any case, we want the full expression tree anyway, without any short-circuits, for doing symbolic evaluation later. Therefore, we tweak Eigen::numext::equal_strict and not_equal_strict to special-case their results if either of the operands is a literal zero, with no throwing even if the other operand has unbound variables.
* TBD [common] Remove copy/move from ExpressionCell ([#15466][_#15466])  # We do not appear to take advantage of the copy / move construction at all (and we have const members, so I suspect move was doing copies anyway). For optimizations like opportunistic mutation or more careful sharing, it seems like having implicit copies available might be a bit of a hazard. Similarly, the base class default destructor is dead code, so is removed. Fix a stray comment on a factory default constructor.

## pydrake bindings

<!-- <relnotes for bindings go here> -->

* TBD [pydrake] Add bindings for TrajectoryLinearSystem ([#15397][_#15397])
* TBD py mp: Allow upcasting to Binding<Constraint> ([#15408][_#15408])
* TBD py mp: Reorder overall bindings for better Python type signatures ([#15410][_#15410])  # Otherwise, type signatures may have C++ types
* TBD pydrake: Add binding for PackageMap.Remove ([#15430][_#15430])  # Co-authored-by: Scott K Logan <logans@cottsay.net> Co-authored-by: Ian McMahon <ian.mcmahon@tri.global>
* TBD py mp: Use template Binding[{Type}]; deprecate old Binding_{Type} ([#15409][_#15409])  # pydrake/__init__.py: - Do not repeat leading `_` for ExecuteExtraPythonCode - Allow forwarding of private `_` variables from cc modules deprecation: - Fix (Py 2 -> Py 3) for empty AttributeError messages - Add ModuleShim._install(*, auto_all)
* TBD py mp: Fix docstring spelling for forwarded module ([#15457][_#15457])
* TBD [py/trajectories] bind matrix versions of PiecewisePolynomial ([#15442][_#15442])  # Takes the pattern established in #15433, and implements it for the remaining construction methods. Resolves #15427.
* TBD [solvers] Add bindings for MathematicalProgram::AddCost(shared_ptr, vars) ([#15400][_#15400])  # There are a number of very similar entry points for adding costs to mathematical program.  We only binding a subset of them so far.  I elected to bind this variant because we don't currently binding the constructor for the Binding_* classes (although I've confirmed that this is also easy to do). This also follows the pattern in AddConstraint.  The AddConstraint((shared_ptr) variant was already bound, but AddConstraint(Binding<Constraint>) is not (yet). For most cases, we've avoided needing this because MathematicalProgram provides enough sugar methods to construct and add all of the variants of costs and constraints that user have been asking for.  But L2NormCost is a new case (until we outwait the deprecation period) where we cannot offer the right sugar.
* TBD [systems,examples] [systems/framework] Cease overriding DoPublish inappropriately ([#15447][_#15447])  # This replaces multiple antiquated practices regarding DoPublish(). Initially, overriding DoPublish() was the de facto mechanism for defining event handlers. As such, it appeared in many cases. Since those days, the APIs have changed and now that means is strongly discouraged. Nevertheless, the various examples were suggestive to end users who would copy this anti-pattern. This correct all erroneous overrides of DoPublish(). In some cases, where there are equally erroneous overrides of DoDiscreteValuesUpdate() or DoUnrestrictedUpdate(), in close proximity, they were corrected as well. But this doesn't generally solve the issue of those overrides. The python pattern for correcting it looks different from the C++ pattern because of the APIs available -- not all C++ sugar has been bound in python.

New features

* planar_scenegraph_visualizer uses SceneGraph API to visualize ([#15456][_#15456])

Fixes

* TBD

Newly bound

* TBD

## Build system

<!-- <relnotes for cmake,doc,setup,third_party,tools go here> -->

* TBD [tools,multibody] [drake_visualizer] Label spatial force on object in for hydro contact ([#15416][_#15416])  # For visualizing hydroelastic contact, the visualized quantities would label a pair of geometries and show various quantities. One was labeled simply "Spatial force" but didn't indicate which body in the pair the force was acting on. This adds the name of the body being acted on. For point-pair contact, we also label which body the force is applied to. There's some additional complexity for point pair contact due to the fact that there are no guarantees on body ordering. This also adds notes on that specific subject (and a TODO in MBP to address this).

## Build dependencies

<!-- Manually relocate any "Upgrade foo_external to latest" lines to here, -->
<!-- and then sort them alphabetically. -->

* TBD

## Newly-deprecated APIs

* drake::geometry::SceneGraph::ExcludeCollisionsBetween ([#15396][_#15396])
* drake::geometry::SceneGraph::ExcludeCollisionsWithin ([#15396][_#15396])
* drake::systems::LeafSystem::DeclareOutputPort (only one overload) ([#15485][_#15485])
* drake::systems::SystemBase::DeclareCacheEntry (only some overloads) ([#15443][_#15443])
* expose_all_files.bzl ([#15469][_#15469])
* pydrake.geometry.SceneGraph.ExcludeCollisionsBetween ([#15396][_#15396])
* pydrake.geometry.SceneGraph.ExcludeCollisionsWithin ([#15396][_#15396])
* pydrake.solvers.mathematicalprogram.Binding_BoundingBoxConstraint ([#15409][_#15409])
* pydrake.solvers.mathematicalprogram.Binding_Constraint ([#15409][_#15409])
* pydrake.solvers.mathematicalprogram.Binding_Cost ([#15409][_#15409])
* pydrake.solvers.mathematicalprogram.Binding_EvaluatorBase ([#15409][_#15409])
* pydrake.solvers.mathematicalprogram.Binding_ExponentialConeConstraint ([#15409][_#15409])
* pydrake.solvers.mathematicalprogram.Binding_L2NormCost ([#15409][_#15409])
* pydrake.solvers.mathematicalprogram.Binding_LinearComplementarityConstraint ([#15409][_#15409])
* pydrake.solvers.mathematicalprogram.Binding_LinearConstraint ([#15409][_#15409])
* pydrake.solvers.mathematicalprogram.Binding_LinearCost ([#15409][_#15409])
* pydrake.solvers.mathematicalprogram.Binding_LinearEqualityConstraint ([#15409][_#15409])
* pydrake.solvers.mathematicalprogram.Binding_LinearMatrixInequalityConstraint ([#15409][_#15409])
* pydrake.solvers.mathematicalprogram.Binding_LorentzConeConstraint ([#15409][_#15409])
* pydrake.solvers.mathematicalprogram.Binding_PositiveSemidefiniteConstraint ([#15409][_#15409])
* pydrake.solvers.mathematicalprogram.Binding_QuadraticCost ([#15409][_#15409])
* pydrake.solvers.mathematicalprogram.Binding_RotatedLorentzConeConstraint ([#15409][_#15409])
* pydrake.solvers.mathematicalprogram.Binding_VisualizationCallback ([#15409][_#15409])
* pydrake.systems.planar_scenegraph_visualizer use of a PoseBundle-valued input port ([#15456][_#15456])

## Removal of deprecated items

* TBD

# Notes


This release provides [pre-compiled binaries](https://github.com/RobotLocomotion/drake/releases/tag/v0.33.0) named
``drake-YYYYMMDD-{bionic|focal|mac}.tar.gz``. See [Nightly Releases](/from_binary.html#nightly-releases) for instructions on how to use them.

Drake binary releases incorporate a pre-compiled version of [SNOPT](https://ccom.ucsd.edu/~optimizers/solvers/snopt/) as part of the
[Mathematical Program toolbox](https://drake.mit.edu/doxygen_cxx/group__solvers.html). Thanks to
Philip E. Gill and Elizabeth Wong for their kind support.

<!-- <begin issue links> -->
[_#15210]: https://github.com/RobotLocomotion/drake/pull/15210
[_#15290]: https://github.com/RobotLocomotion/drake/pull/15290
[_#15340]: https://github.com/RobotLocomotion/drake/pull/15340
[_#15348]: https://github.com/RobotLocomotion/drake/pull/15348
[_#15350]: https://github.com/RobotLocomotion/drake/pull/15350
[_#15352]: https://github.com/RobotLocomotion/drake/pull/15352
[_#15358]: https://github.com/RobotLocomotion/drake/pull/15358
[_#15368]: https://github.com/RobotLocomotion/drake/pull/15368
[_#15371]: https://github.com/RobotLocomotion/drake/pull/15371
[_#15372]: https://github.com/RobotLocomotion/drake/pull/15372
[_#15387]: https://github.com/RobotLocomotion/drake/pull/15387
[_#15390]: https://github.com/RobotLocomotion/drake/pull/15390
[_#15391]: https://github.com/RobotLocomotion/drake/pull/15391
[_#15394]: https://github.com/RobotLocomotion/drake/pull/15394
[_#15396]: https://github.com/RobotLocomotion/drake/pull/15396
[_#15397]: https://github.com/RobotLocomotion/drake/pull/15397
[_#15399]: https://github.com/RobotLocomotion/drake/pull/15399
[_#15400]: https://github.com/RobotLocomotion/drake/pull/15400
[_#15408]: https://github.com/RobotLocomotion/drake/pull/15408
[_#15409]: https://github.com/RobotLocomotion/drake/pull/15409
[_#15410]: https://github.com/RobotLocomotion/drake/pull/15410
[_#15411]: https://github.com/RobotLocomotion/drake/pull/15411
[_#15412]: https://github.com/RobotLocomotion/drake/pull/15412
[_#15413]: https://github.com/RobotLocomotion/drake/pull/15413
[_#15415]: https://github.com/RobotLocomotion/drake/pull/15415
[_#15416]: https://github.com/RobotLocomotion/drake/pull/15416
[_#15418]: https://github.com/RobotLocomotion/drake/pull/15418
[_#15425]: https://github.com/RobotLocomotion/drake/pull/15425
[_#15426]: https://github.com/RobotLocomotion/drake/pull/15426
[_#15430]: https://github.com/RobotLocomotion/drake/pull/15430
[_#15431]: https://github.com/RobotLocomotion/drake/pull/15431
[_#15432]: https://github.com/RobotLocomotion/drake/pull/15432
[_#15433]: https://github.com/RobotLocomotion/drake/pull/15433
[_#15438]: https://github.com/RobotLocomotion/drake/pull/15438
[_#15442]: https://github.com/RobotLocomotion/drake/pull/15442
[_#15443]: https://github.com/RobotLocomotion/drake/pull/15443
[_#15447]: https://github.com/RobotLocomotion/drake/pull/15447
[_#15448]: https://github.com/RobotLocomotion/drake/pull/15448
[_#15451]: https://github.com/RobotLocomotion/drake/pull/15451
[_#15452]: https://github.com/RobotLocomotion/drake/pull/15452
[_#15453]: https://github.com/RobotLocomotion/drake/pull/15453
[_#15456]: https://github.com/RobotLocomotion/drake/pull/15456
[_#15457]: https://github.com/RobotLocomotion/drake/pull/15457
[_#15466]: https://github.com/RobotLocomotion/drake/pull/15466
[_#15469]: https://github.com/RobotLocomotion/drake/pull/15469
[_#15470]: https://github.com/RobotLocomotion/drake/pull/15470
[_#15472]: https://github.com/RobotLocomotion/drake/pull/15472
[_#15473]: https://github.com/RobotLocomotion/drake/pull/15473
[_#15474]: https://github.com/RobotLocomotion/drake/pull/15474
[_#15475]: https://github.com/RobotLocomotion/drake/pull/15475
[_#15476]: https://github.com/RobotLocomotion/drake/pull/15476
[_#15483]: https://github.com/RobotLocomotion/drake/pull/15483
[_#15484]: https://github.com/RobotLocomotion/drake/pull/15484
[_#15485]: https://github.com/RobotLocomotion/drake/pull/15485
[_#15486]: https://github.com/RobotLocomotion/drake/pull/15486
[_#15494]: https://github.com/RobotLocomotion/drake/pull/15494
[_#15495]: https://github.com/RobotLocomotion/drake/pull/15495
[_#15499]: https://github.com/RobotLocomotion/drake/pull/15499
[_#15501]: https://github.com/RobotLocomotion/drake/pull/15501
[_#15502]: https://github.com/RobotLocomotion/drake/pull/15502
<!-- <end issue links> -->

<!--
  Current oldest_commit 37832588e9e65a84d6eea121159d469309c32f2e (exclusive).
  Current newest_commit cec5e3e5da24d0d232b550664943d57a02c33c07 (inclusive).
-->
