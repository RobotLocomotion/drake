---
title: Drake v1.40.0
date: 2099-12-31
released: YYYY-MM-DD
---

# Announcements

* Drake's Python wheels on Linux are now based on `manylinux_2_34` (instead of
  `manylinux_2_35`) ([#22779][_#22779]).
  * This allows wheels to install and run on more platforms such as Amazon Linux
	2023, AlmaLinux 9, RHEL 9, etc.
* Linux wheels for Python 3.13 are now available ([#22580][_#22580]).
  * Drake's python bindings no longer use a RobotLocomotion fork of pybind11;
    instead, the bindings use the upstream version plus two custom patches
    ([#22738][_#22738]). Downstream Bazel projects that reuse Drake's copy of
    pybind11 for their own bindings will probably need to adjust their code
    to be compatible with the updated pybind11.

# Breaking changes since v1.39.0

* None

Refer to our [Drake Stability Guidelines](/stable.html) for our policy
on API changes.

# Changes since v1.39.0

## Dynamical Systems

<!-- <relnotes for systems go here> -->

New features

* Add discrete-time steady-state Kalman filter ([#22687][_#22687])
* Implement create IntegratorBase from integration scheme ([#22838][_#22838])
* Support `x'Nu` term in discrete-time LQR ([#22686][_#22686])
* Implement Integrator::Clone ([#22773][_#22773])

Fixes

* In FiniteHorizonLinearQuadraticRegulator, avoid rejecting system with floating abstract input port ([#22762][_#22762])

## Mathematical Program

<!-- <relnotes for solvers go here> -->

* [fix] TBD [solvers,planning] Set gradient sparsity pattern in KinTrajOpt AddVelocityConstraint ([#22763][_#22763])

New features

* TBD

Fixes

* TBD

## Multibody Dynamics and Geometry

<!-- <relnotes for geometry,multibody go here> -->

* [feature] TBD Implements distance constraints parameters ([#22778][_#22778])
* [feature] TBD Update rendering to use non-uniform Convex/Mesh scale ([#22822][_#22822])  # Note: very little has to be done with the Convex as the scale is directly incorporated into the hull's polygonal mesh directly. Only the mesh requires particular effort. NOTE TO RELEASE ENGINEER: This is one of multiple PRs that enable non-uniform scaling (see also 22772).  For the release, they should all be lumped together. The total feature description is: Enable non-uniform scaling for Mesh and Convex geometries.
* [fix] TBD [multibody] Fix crash on frame elements not added to a plant ([#22821][_#22821])  # Co-authored-by: Paul Mitiguy <paul.mitiguy@tri.global>
* [fix] TBD [parsing] Fix parsing of erroneous curvilinear joint input ([#22840][_#22840])
* [fix] TBD [sap] Remove bogus assertion on Kp > 0 ([#22753][_#22753])
* [feature] TBD [geometry,multibody] Introduce 3D scale in mesh processing algorithms ([#22772][_#22772])  # This includes parsing mesh into Drake constructs and computing convex hulls. When parsing mesh files (e.g., obj, vtk, etc.) we explicitly handle the case where the scale includes mirroring which may cause the mesh windings to be wound incorrectly. This also attempts to unify the internal APIs with regards to what scale factors are accepted. We accept any scale factor -- even zero. Because these are internal, if some limit needs to be placed by some application, we rely on the application to enforce that constraint. NOTE TO RELEASE ENGINEER: This is one of multiple PRs that enable non-uniform scaling.  For the release, they should all be lumped together. The total feature description is: Enable non-uniform scaling for Mesh and Convex geometries.
* [feature] TBD [multibody] Adds MultibodyPlant::AddTendonConstraint() ([#22803][_#22803])
* [feature] TBD [meshcat] Add GetButtonNames() ([#22806][_#22806])
* [feature] TBD Extend Mesh/Convex to include non-uniform scale ([#22785][_#22785])  # Note: while this adds the APIs, the non-uniform scale is not used in most places. Configuring a non-uniform scale and then exercising those domains will throw an exception. Currently, the computation of convex hulls from non-uniform scale is the only supported operation. NOTE TO RELEASE ENGINEER: This is one of multiple PRs that enable non-uniform scaling (see also #22772).  For the release, they should all be lumped together. The total feature description is: Enable non-uniform scaling for Mesh and Convex geometries.

New features

* TBD

Fixes

* TBD

## Planning

<!-- <relnotes for planning go here> -->

* [fix] TBD Add sparsity pattern when KinematicTrajectoryOptimization imposes bounds on acceleration and jerk ([#22800][_#22800])

New features

* None

Fixes

* None

## Tutorials and examples

<!-- <relnotes for examples,tutorials go here> -->

* None

## Miscellaneous features and fixes

<!-- <relnotes for common,math,lcm,lcmtypes,manipulation,perception,visualization go here> -->

* [feature] TBD [manipulation] Add set_joint_positions files copied from Anzu ([#22847][_#22847])  # Co-Authored-By: Grant Gould <ggould@alum.mit.edu> Co-authored-by: Jeremy Nimmer <jeremy.nimmer@tri.global>
* [feature] TBD [manipulation] Add ApplyNamedPositionsAsDefaults ([#22847][_#22847])  # Add the copied code to the BUILD and fixes its file names and namespaces to match up with Drake instead of Anzu.
* Fix divide-by-zero in ColorizeDepthImage ([#22765][_#22765])

## pydrake bindings

<!-- <relnotes for bindings go here> -->

* [fix] TBD [pydrake] bind ApplyNamedPositionsAsDefaults ([#22849][_#22849])
* [fix] TBD [pydrake] Fix a bug in the Simulator constructor ([#22781][_#22781])  # The prior implementation of the Simulator() binding yielded two possible lifetime regimes for the context: * internally allocated contexts were effectively C++ unique_ptr * passed-from-python contexts were Python ref-counted This patch causes both cases to yield Python-ref-counted contexts, and it adds documentation to warn against attempts to "share" contexts across Simulators.
* [fix] TBD [py sensors] ApplyCameraConfig overloaded on LcmInterfaceSystem ([#22811][_#22811])
* [fix] TBD [pydrake] Fix costs and constraints memory hazards ([#22795][_#22795])  # Augment entry points that handle costs and constraints via shared_ptr to maintain both the c++ object and its python wrapper. When the python wrapper was inadvertently lost, additional semantics (keep-alives, etc.) could be lost, leading to UB.
* [fix] TBD [pydrake] Avoid lifetime hazards with port references ([#22775][_#22775])  # Stop using keep_alive with returned port references; use ref_cycle instead. The most common place where this problem can arise is when writing leaf systems in Python. To support that use case, re-annotate port methods in the systems framework. It is not impossible to induce the hazard on any arbitrary system by stuffing port references into dynamic system attributes. This patch does not attempt to fix any such cases, but does provide some test helper code to make it easier to correct such cases if they are reported.

New features

* TBD

Fixes

* TBD

## Build system

<!-- <relnotes for cmake,doc,setup,third_party,tools go here> -->

* Rebase Linux wheels to `manylinux_2_34` (from `manylinux_2_35`) ([#22779][_#22779])
* Publish linux wheels for Python 3.13 ([#22580][_#22580])
* Fix CMake race condition ([#22766][_#22766])

## Build dependencies

<!-- <relnotes for workspace go here> -->

* Switch pybind11 to use upstream version, plus two custom patches ([#22738][_#22738], [#22832][_#22832])
* Upgrade vtk_internal to latest commit ([#22702][_#22702])

## Newly-deprecated APIs

* None

## Removal of deprecated items

* TBD Remove deprecated code 2025-04 ([#22834][_#22834])

# Notes


This release provides [pre-compiled binaries](https://github.com/RobotLocomotion/drake/releases/tag/v1.40.0) named
``drake-1.40.0-{jammy|noble|mac-arm64}.tar.gz``. See [Stable Releases](/from_binary.html#stable-releases) for instructions on how to use them.

Drake binary releases incorporate a pre-compiled version of [SNOPT](https://ccom.ucsd.edu/~optimizers/solvers/snopt/) as part of the
[Mathematical Program toolbox](https://drake.mit.edu/doxygen_cxx/group__solvers.html). Thanks to
Philip E. Gill and Elizabeth Wong for their kind support.

<!-- <begin issue links> -->
[_#22580]: https://github.com/RobotLocomotion/drake/pull/22580
[_#22686]: https://github.com/RobotLocomotion/drake/pull/22686
[_#22687]: https://github.com/RobotLocomotion/drake/pull/22687
[_#22702]: https://github.com/RobotLocomotion/drake/pull/22702
[_#22738]: https://github.com/RobotLocomotion/drake/pull/22738
[_#22753]: https://github.com/RobotLocomotion/drake/pull/22753
[_#22762]: https://github.com/RobotLocomotion/drake/pull/22762
[_#22763]: https://github.com/RobotLocomotion/drake/pull/22763
[_#22765]: https://github.com/RobotLocomotion/drake/pull/22765
[_#22766]: https://github.com/RobotLocomotion/drake/pull/22766
[_#22772]: https://github.com/RobotLocomotion/drake/pull/22772
[_#22773]: https://github.com/RobotLocomotion/drake/pull/22773
[_#22775]: https://github.com/RobotLocomotion/drake/pull/22775
[_#22778]: https://github.com/RobotLocomotion/drake/pull/22778
[_#22779]: https://github.com/RobotLocomotion/drake/pull/22779
[_#22781]: https://github.com/RobotLocomotion/drake/pull/22781
[_#22785]: https://github.com/RobotLocomotion/drake/pull/22785
[_#22795]: https://github.com/RobotLocomotion/drake/pull/22795
[_#22800]: https://github.com/RobotLocomotion/drake/pull/22800
[_#22803]: https://github.com/RobotLocomotion/drake/pull/22803
[_#22806]: https://github.com/RobotLocomotion/drake/pull/22806
[_#22811]: https://github.com/RobotLocomotion/drake/pull/22811
[_#22821]: https://github.com/RobotLocomotion/drake/pull/22821
[_#22822]: https://github.com/RobotLocomotion/drake/pull/22822
[_#22832]: https://github.com/RobotLocomotion/drake/pull/22832
[_#22834]: https://github.com/RobotLocomotion/drake/pull/22834
[_#22838]: https://github.com/RobotLocomotion/drake/pull/22838
[_#22840]: https://github.com/RobotLocomotion/drake/pull/22840
[_#22847]: https://github.com/RobotLocomotion/drake/pull/22847
[_#22849]: https://github.com/RobotLocomotion/drake/pull/22849
<!-- <end issue links> -->

<!--
  Current oldest_commit 0596a5eb8717b677c573118bc5e2558c1f1f07ba (exclusive).
  Current newest_commit 77afad136d82f1d0be5adf106e82c95d19c963c9 (inclusive).
-->
