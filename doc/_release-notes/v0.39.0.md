---
title: Drake v0.39.0
released: YYYY-MM-DD
---

# Announcements

* TBD [doc] Add full website DDG search to pydrake search panel ([#16473][_#16473])
* TBD [doc] Add DDG searches to our Doxygen header ([#16491][_#16491])

# Breaking changes since v0.38.0

* TBD

# Changes since v0.38.0

## Dynamical Systems

<!-- <relnotes for systems go here> -->

* TBD [systems] Add MultilayerPerceptron ([#16396][_#16396])  # I've been looking at various ways to interface between Drake and Pytorch, and realized that in many workflows (at least for RL), the networks are so small that any advantage we get from moving to PyTorch / GPU is probably washed away by the interface layer. I think it will prove very useful to have this class here; I suspect that in many relevant cases we won't need PyTorch at all.
* TBD [systems/primitives] Add BatchOutput to MultilayerPerceptron ([#16410][_#16410])
* TBD [systems,manipulation,multibody,math,common] Remove deprecated code 2022-02 ([#16479][_#16479])
* TBD [framework] Add DiagramBuilder::connection_map function ([#16477][_#16477])

New features

* TBD

Fixes

* TBD

## Mathematical Program

<!-- <relnotes for solvers go here> -->

* TBD deprecate MathematicalProgram::NewNonnegativePolynomial ([#16375][_#16375])  # The deprecated C++ test coverage is delegated to python (only).
* TBD return the cost from AddMaximizeGeometricMeanCost ([#16373][_#16373])
* TBD Variable scaling for OSQP solver ([#16423][_#16423])  # * Add variable scaling to OsqpSolver, and add ClearVariableScaling to MathematicalProgram
* TBD Eval augmented lagrangian ([#16391][_#16391])  # * add augmented lagrangian Turn a constrained optimization problem to the unconstrained one, by evaluating its augmented Lagrangian, given the variable value, the estimated Lagrangian and the penalty term. The augmented Lagrangian is not a smooth function everywhere.
* TBD AddFooConstraint support matrix input ([#16424][_#16424])  # Previously when we pass in matrix input, it (silently) only impose constraint on the first column of the matrix.
* TBD [solvers,tools] [workspace] Upgrade scs to latest release 3.1.0 ([#16484][_#16484])
* TBD Improve MathematicalProgram performance while adding variables ([#16472][_#16472])  # Use std::vector<Variable> instead of VectorX<Variable> for decision_variables_ and indeterminates_ MathematicalProgram. This improves the speed of declaring new variables within a loop, now it takes logarithmic number of heap allocation, compared to linear number before.

New features

* TBD

Fixes

* TBD

## Multibody Dynamics and Geometry

<!-- <relnotes for geometry,multibody go here> -->

* TBD [multibody,tools] [multibody] Establish detail_mujoco_parser ([#16370][_#16370])  # First step towards #16369. This PR simply establishes the class and the test files. The following PRs will start adding more meaningful functionality.
* TBD Add SceneGraphInspector::GetParent(FrameId) ([#16368][_#16368])  # * Add SceneGraphInspector::GetParentFrame(FrameId) Signed-off-by: Shane Loretz <sloretz@osrfoundation.org>
* TBD [multibody] Add unit inertia for capsule ([#16357][_#16357])
* TBD [geometry] Refactor ClipPolygonByHalfSpace() for code reuse ([#16374][_#16374])  # - Move ClipPolygonByHalfSpace() from being a static member of SurfaceVolumeIntersector to be a free function. - Move its helper CalcIntersection() as well.
* TBD [multibody] Guard hazardous map access by GeometryId ([#16390][_#16390])  # The GeometryId values for collisions come in on an input port. We need to sanity-check them prior to using them. For two maps that were already dead code, we just kill the deadwood instead of adding guards for it. The related default_coulomb_friction_ was also dead code, so is also purged.
* TBD [multibody,tools] [meshcat] Add JointSliders system ([#16400][_#16400])
* TBD Compute volume of a VPolytope ([#16409][_#16409])  # Use qhull to compute the volume
* TBD [meshcat] Add JointSliders::Run ([#16426][_#16426])
* TBD [multibody,geometry] [multibody] Move ContactResultsToMeshcat into meshcat directory ([#16437][_#16437])  # ... and rename it to ContactVisualizer for simplicity. We should not contaminate the MultibodyPlant library with an unconditional dependency on MeshCat.
* TBD [multibody] Add ContactResultsToLcm deprecations ([#16437][_#16437])
* TBD [multibody,examples] [parsing] Deprecate PopulateUpstreamToDrake ([#16434][_#16434])
* TBD [meldis] Auto-quit when idle for more than 15 minutes ([#16445][_#16445])
* TBD [geometry] Refactor a lighter version of SliceTetWithPlane() ([#16458][_#16458])  # Co-authored-by: DamrongGuoy <damrong.guoy@tri.global>
* TBD [geometry] Contact surface between two compliant meshes with pressure fields ([#16365][_#16365])
* TBD [geometry,multibody] [geometry] Hydroelastic callback for compliant-compliant contact ([#16366][_#16366])  # * [geometry] Hydroelastic callback for compliant-compliant contact - Expand the cases of calculating contact surfaces.
* TBD [geometry] Document QueryObject to support compliant-compliant contact ([#16471][_#16471])
* TBD [plant] Add MbP back-pointer into ContactResults struct ([#16478][_#16478])  # This enables consumers of the ContactResults to actually understand what the results mean, even in the presence of scalar conversion. Consumers cannot store a long-lived pointer to the MbP on their own, because it will be incorrect any time the Diagram gets rebuilt.
* TBD [multibody] Use compliant-compliant hydroelastic contact in MultibodyPlant ([#16367][_#16367])  # - Update the effective pressure gradient from two compliant objects.
* TBD [multibody] Fix to enable Expression in MakeFromCentralInertia ([#16469][_#16469])
* TBD [parsing] Stop putting memory addresses into geometry names ([#16499][_#16499])
* TBD [meshcat] Use body names for point contact visualization ([#16493][_#16493])
* TBD [meshcat] Wire up geometry names for point contact visualization ([#16515][_#16515])

New features

* TBD

Fixes

* TBD

## Tutorials and examples

<!-- <relnotes for examples,tutorials go here> -->

* TBD [examples,tools] [pydrake] Add meshcat display server for drake_visualizer's protocol ([#16263][_#16263])  # The server program is named "meldis". Refer to the acrobot README (which has been refreshed here) for an example of to use it.
* TBD [meldis] Display point contact results ([#16436][_#16436])
* TBD Adds missing collision filters to Atlas model ([#16488][_#16488])  # * Updates Atlas URDF model filters to avoid collisions with Hokuyo LIDAR."
* TBD [examples,multibody] [examples] Recommend using meldis where possible ([#16452][_#16452])  # For now, demos of hydroelastics or demos with camera images remain pinned to drake_visualizer.  Neither geometry::Meshcat nor meldis support that data (yet).
* TBD

## Miscellaneous features and fixes

<!-- <relnotes for common,math,lcm,lcmtypes,manipulation,perception go here> -->

* TBD Iiwa14 acceleration limits ([#16377][_#16377])  # Adds iiwa14 acceleration limits.
* TBD [yaml] Fix unit test of fmt output ([#16416][_#16416])
* TBD [manipulation,examples] Make JacoCommandReceiver use an input port for initial position ([#16483][_#16483])  # This mirrors the approach used in IiwaCommandReceiver. This PR doesn't fully modernize the Jaco LCM classes to mimic the behavior of the iiwa.  I have a longer-lived development branch for that effort.  I'm moving this change to it's own commit because it's needed more urgently.
* TBD

## pydrake bindings

<!-- <relnotes for bindings go here> -->

* TBD [pydrake] Bind DrakeLcmInterface::get_lcm_url ([#16413][_#16413])
* TBD [meldis] Use flushing and throttling to keep pace ([#16454][_#16454])  # Without this, very fast simulations (e.g., 2000 Hz draw commands) tend to clog up the queues and the web view falls far behind.
* TBD [pydrake] Add bindings for CalcImplicitTimeDerivativesResidual ([#16467][_#16467])  # and a few other missing SystemBase bindings.

New features

* TBD

Fixes

* TBD

Newly bound

* TBD

## Build system

<!-- <relnotes for cmake,doc,setup,third_party,tools go here> -->

* TBD [tools,doc] [tools] Deprecate drake-visualizer on macOS ([#16386][_#16386])
* TBD [tools] Fix "generated by these conflicting actions" in Bazel 5.0 ([#16405][_#16405])  # When something depends on a unit test (in our case, the macOS dSYM generation), then Bazel as of 5.0 dies a horrible death. Work around that by adding the dependency only in cases where the user has opted-in to debugging on macOS, and in that case also turn off the problematic trim_test_configuration feature.
* TBD [tools,geometry,setup,systems] Upgrade to VTK 9 ([#16132][_#16132])  # - VTK 8 builds for `tools/workspace/drake_visualizer`. - VTK 8 is built as part of the director tarball, and can be removed once support for drake_visualizer is dropped. - The vtk in the python install tree for drake is from VTK 8. - Installation logic that special-cases having both VTK 8 and VTK 9 installed side-by-side: - `tools/install/bazel/drake.BUILD.bazel` - `tools/install/installer.py` - drake_visualizer docker infrastructure revamped to enable caching and developer convenience, similar to `tools/wheel` infrastructure. - Patches previously in `tools/workspace/vtk` for VTK 8 are now a part of `tools/workspace/drake_visualizer` as a result. - VTK 9 builds for the rest of drake as part of both `tools/workspace/vtk` and for pip wheel builds in `tools/wheel/image`. - The vtk and wheel docker infrastructure are as similar as possible, enabling caching and developer convenience.  They both install the same version of CMake now as well as have nearly identical CMake configurations for VTK. - Instructions for updating `tools/workspace/vtk` added to a README.md in that folder, as well as notes about the differences between CMake configurations for Ubuntu, macOS, and wheel builds. - macOS VTK 9 build: https://github.com/RobotLocomotion/homebrew-director/pull/6 - VTK 9 code updates: - VTK_OVERRIDE is deprecated, use override instead. - Update to the vtkOpenGLShaderProperty interface.
* TBD Rename dummy library to fix Bazel 5 error ([#16418][_#16418])
* TBD [third_party,geometry,tools] Use upstream vtkCapsuleSource ([#16419][_#16419])  # Remove our locally-vendored version of vtkCapsuleSource and instead use the upstream version, which is newly available with the switch to VTK 9.
* TBD [tools,setup] [workspace] Infer homebrew path based on arch ([#16389][_#16389])  # This is a starting point for supporting ARM64 on macOS, but we cannot quite complete a full build yet.
* TBD Remove spurious DEPENDS in pip dependencies ([#16521][_#16521])  # In our build, libjpeg-turbo never depends on anything, but had a statement for having a conditional dependency (probably left over from Fletch). Since this is not needed and never does anything in our build, remove it.
* TBD Enable CLP in pip build ([#16521][_#16521])

## Build dependencies

<!-- Manually relocate any "Upgrade foo_external to latest" lines to here, -->
<!-- and then sort them alphabetically. -->

* Upgrade recommended Bazel version to 5.0 ([#16523][_#16523])
* Add libcmaes as a testonly dependency ([#16441][_#16441])
* Upgrade buildifier to latest release 4.2.5 ([#16484][_#16484])
* Upgrade common_robotics_utilities to latest commit ([#16484][_#16484])
* Upgrade dm_control to latest commit ([#16484][_#16484])
* Upgrade googlebenchmark to latest release v1.6.1 ([#16484][_#16484])
* Upgrade ignition_math to latest release ignition-math6_6.10.0 ([#16484][_#16484])
* Upgrade meshcat_python to latest commit ([#16505][_#16505])
* Upgrade ros_xacro to latest release 1.13.16 ([#16484][_#16484])
* Upgrade rules_pkg to latest release 0.6.0 ([#16485][_#16485])
* Upgrade stduuid to latest commit ([#16387][_#16387])
* Upgrade voxelized_geometry_tools to latest commit ([#16484][_#16484])

## Newly-deprecated APIs

* TBD

## Removal of deprecated items

* TBD

# Notes


This release provides [pre-compiled binaries](https://github.com/RobotLocomotion/drake/releases/tag/v0.39.0) named
``drake-YYYYMMDD-{bionic|focal|mac}.tar.gz``. See [Stable Releases](/from_binary.html#stable-releases) for instructions on how to use them.

Drake binary releases incorporate a pre-compiled version of [SNOPT](https://ccom.ucsd.edu/~optimizers/solvers/snopt/) as part of the
[Mathematical Program toolbox](https://drake.mit.edu/doxygen_cxx/group__solvers.html). Thanks to
Philip E. Gill and Elizabeth Wong for their kind support.

<!-- <begin issue links> -->
[_#16132]: https://github.com/RobotLocomotion/drake/pull/16132
[_#16263]: https://github.com/RobotLocomotion/drake/pull/16263
[_#16356]: https://github.com/RobotLocomotion/drake/pull/16356
[_#16357]: https://github.com/RobotLocomotion/drake/pull/16357
[_#16365]: https://github.com/RobotLocomotion/drake/pull/16365
[_#16366]: https://github.com/RobotLocomotion/drake/pull/16366
[_#16367]: https://github.com/RobotLocomotion/drake/pull/16367
[_#16368]: https://github.com/RobotLocomotion/drake/pull/16368
[_#16370]: https://github.com/RobotLocomotion/drake/pull/16370
[_#16373]: https://github.com/RobotLocomotion/drake/pull/16373
[_#16374]: https://github.com/RobotLocomotion/drake/pull/16374
[_#16375]: https://github.com/RobotLocomotion/drake/pull/16375
[_#16377]: https://github.com/RobotLocomotion/drake/pull/16377
[_#16386]: https://github.com/RobotLocomotion/drake/pull/16386
[_#16387]: https://github.com/RobotLocomotion/drake/pull/16387
[_#16389]: https://github.com/RobotLocomotion/drake/pull/16389
[_#16390]: https://github.com/RobotLocomotion/drake/pull/16390
[_#16391]: https://github.com/RobotLocomotion/drake/pull/16391
[_#16396]: https://github.com/RobotLocomotion/drake/pull/16396
[_#16400]: https://github.com/RobotLocomotion/drake/pull/16400
[_#16405]: https://github.com/RobotLocomotion/drake/pull/16405
[_#16409]: https://github.com/RobotLocomotion/drake/pull/16409
[_#16410]: https://github.com/RobotLocomotion/drake/pull/16410
[_#16413]: https://github.com/RobotLocomotion/drake/pull/16413
[_#16416]: https://github.com/RobotLocomotion/drake/pull/16416
[_#16418]: https://github.com/RobotLocomotion/drake/pull/16418
[_#16419]: https://github.com/RobotLocomotion/drake/pull/16419
[_#16423]: https://github.com/RobotLocomotion/drake/pull/16423
[_#16424]: https://github.com/RobotLocomotion/drake/pull/16424
[_#16426]: https://github.com/RobotLocomotion/drake/pull/16426
[_#16434]: https://github.com/RobotLocomotion/drake/pull/16434
[_#16436]: https://github.com/RobotLocomotion/drake/pull/16436
[_#16437]: https://github.com/RobotLocomotion/drake/pull/16437
[_#16441]: https://github.com/RobotLocomotion/drake/pull/16441
[_#16445]: https://github.com/RobotLocomotion/drake/pull/16445
[_#16452]: https://github.com/RobotLocomotion/drake/pull/16452
[_#16454]: https://github.com/RobotLocomotion/drake/pull/16454
[_#16458]: https://github.com/RobotLocomotion/drake/pull/16458
[_#16467]: https://github.com/RobotLocomotion/drake/pull/16467
[_#16469]: https://github.com/RobotLocomotion/drake/pull/16469
[_#16471]: https://github.com/RobotLocomotion/drake/pull/16471
[_#16472]: https://github.com/RobotLocomotion/drake/pull/16472
[_#16473]: https://github.com/RobotLocomotion/drake/pull/16473
[_#16477]: https://github.com/RobotLocomotion/drake/pull/16477
[_#16478]: https://github.com/RobotLocomotion/drake/pull/16478
[_#16479]: https://github.com/RobotLocomotion/drake/pull/16479
[_#16483]: https://github.com/RobotLocomotion/drake/pull/16483
[_#16484]: https://github.com/RobotLocomotion/drake/pull/16484
[_#16485]: https://github.com/RobotLocomotion/drake/pull/16485
[_#16488]: https://github.com/RobotLocomotion/drake/pull/16488
[_#16491]: https://github.com/RobotLocomotion/drake/pull/16491
[_#16493]: https://github.com/RobotLocomotion/drake/pull/16493
[_#16499]: https://github.com/RobotLocomotion/drake/pull/16499
[_#16505]: https://github.com/RobotLocomotion/drake/pull/16505
[_#16515]: https://github.com/RobotLocomotion/drake/pull/16515
[_#16521]: https://github.com/RobotLocomotion/drake/pull/16521
[_#16523]: https://github.com/RobotLocomotion/drake/pull/16523
<!-- <end issue links> -->

<!--
  Current oldest_commit 8c4b39c0e4a2d983e4b5935b509f00bd1822c2ae (exclusive).
  Current newest_commit 3918f5369eff0e19c44125f8f6864b99555d7f14 (inclusive).
-->
