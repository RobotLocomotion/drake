*************
Drake v0.23.0
*************

Announcements
-------------

* All code for RigidBodyPlant and the drake "attic" has been removed (`#13889`_).

Breaking changes since v0.22.0
------------------------------

These are breaking changes that did not undergo a deprecation period:

* The drake::systems::Subvector and drake::systems::Supervector are now marked
  final (`#13907`_)
* For drake::yaml::YamlReadArchive, it's now an error for yaml data to remain
  unparsed, unless the user opts in to allowing it. Users who want a different
  behavior should change the Options at construction-time. (`#13900`_)
* The drake::examples::rod2d::Rod2D::pose_output() port has been removed, as
  the system no longer connects to the systems::rendering API (`#13890`_).

Changes since v0.22.0
---------------------

Dynamical Systems
~~~~~~~~~~~~~~~~~

.. <relnotes for systems go here>
* TBD framework: Deprecate kAutoSize (`#13981`_)  # In pydrake, remove it immediately.  (As of Python 3.6, there is no official support for deprecating attributes; it's new as of 3.7.) This is a breaking change.
* TBD Allow PassThroughSystem to emit default values (`#13976`_)  # I originally wrote this as a brand new system for optional values, but realized I was almost completely duplicating the PassThroughSystem.  I *think* this is the best place for it.

New features

* Provide System::get_input_port() and get_output_port() sugar (`#13883`_, `#13894`_, `#13895`_, `#13896`_, `#13897`_, `#13898`_)
* Optionally suppress simulator initialization events (`#13872`_)
* Add SequentialExpressionManager::GetSequentialExpressionNames (`#13925`_)
* Implement derivatives for PiecewiseQuaternion (`#13972`_)

Fixes

* Add port names to InverseDynamicsController (`#13879`_)
* Mark Subvector and Supervector final (`#13907`_)

Mathematical Program
~~~~~~~~~~~~~~~~~~~~

.. <relnotes for solvers go here>

New features

* Change IPOPT eval_g to use double version of constraint evaluation (`#13891`_)
* Add generic polynomial (`#13940`_)
* Add MonomialBasisElement (`#13867`_)
* Add a function to compute polynomial basis up to a given order (`#13870`_)

Fixes

* TBD

Multibody Dynamics
~~~~~~~~~~~~~~~~~~

.. <relnotes for geometry,multibody go here>
* TBD parameterizes rigid bodies in MBP (`#13860`_)
* TBD Add SpatialMomentum to documentation for multibody_quantities_html (`#13959`_)  # * Respond to Sherm's comments.

New features

* Add API to compute SpatialAccelerationInWorld (`#13773`_)
* Support parsing massless bodies (`#13908`_, `#13927`_)
* New hydroelastic contact model in progress (`#13864`_)

Fixes

* Eliminate heap use from CalcMassMatrix() (`#13873`_, `#13928`_, `#13933`_, `#13953`_)

Tutorials and examples
~~~~~~~~~~~~~~~~~~~~~~

.. <relnotes for examples,tutorials go here>
* In manipulation station, offer better Schunk WSG models (`#13922`_)
* In rod2d, use modern SceneGraph conventions for visualization (`#13890`_)

Miscellaneous features and fixes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. <relnotes for common,math,lcm,lcmtypes,manipulation,perception go here>
[manipulation,multibody,solvers,systems,tools] * TBD Remove deprecated code (2020-09) (`#13939`_)
* TBD trajectories: add bindings for PiecewiseQuaternionSlerp (`#13974`_)
* manipulation: Add DifferentialInverseKinematicsIntegrator (`#13877`_, `#13919`_, `#13920`_)
* manipulation: Make Schunk WSG limit input port optional (`#13878`_)
* schema: Add stochastic, rotation, and transform types (`#13943`_, `#13949`_)
* yaml: Allow omitting the root name while writing (`#13915`_)
* yaml: It's an error by default for yaml data to remain unparsed (`#13900`_)

pydrake bindings
~~~~~~~~~~~~~~~~

.. <relnotes for bindings go here>
* TBD pydrake: Copy yaml utilities from Anzu (`#13982`_)  # Co-authored-by: Eric Cousineau <eric.cousineau@tri.global> Co-authored-by: Grant Gould <ggould@tri.global> Co-authored-by: Sam Creasey <sam.creasey@tri.global>
* TBD pydrake: Adapt yaml utilities to Drake and add to BUILD (`#13982`_)

New features

* Add pydrake.systems.jupyter_widgets.WidgetSystem (`#13882`_)

Fixes

* Ensure that multiply (matmul) preserves input shape (`#13886`_)
* Add missing import for jupyter widgets (`#13941`_)

Newly bound

* pydrake.geometry.render.MakeRenderEngineOspray (`#13893`_)

Build system and dependencies
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. <relnotes for attic,cmake,doc,setup,third_party,tools go here>
* TBD workspace: Upgrade fcl to latest commit (`#13965`_)
* TBD MeshcatVisualizer: Tweaks to support caching mesh geometry on the zmq server (`#13971`_)  # Adds an argument to the constructor to avoid deleting the entire tree on every run. Sets uuids deterministically based on the mesh file so that they can be recognized as identical on the server. See https://github.com/rdeits/meshcat-python/pull/75 This makes a *dramatic* improvement in the workflow of using meshcat on colab (at least as we use it in drake), because we don't have to repeatedly download large meshfiles from repeated simulations.
[doc,tools] * TBD tools: Improve relnotes tooling (`#13955`_)  # Automatically bootstrap from our project template. Automatically read and update commit ranges in the document. Automatically place new commits into sections. Automatically update PR hyperlinks.
* Upgrade bazel_skylib to latest release 1.0.3 (`#13969`_)
* Upgrade fmt to latest release 7.0.3 (`#13968`_)
* Upgrade ghc_filesystem to latest release 1.3.4 (`#13966`_)
* Upgrade ros_xacro to latest release 1.13.8 (`#13967`_)

Newly-deprecated APIs
~~~~~~~~~~~~~~~~~~~~~

* drake::systems::Subvector 1-argument constructor (`#13907`_)

Removal of deprecated items
~~~~~~~~~~~~~~~~~~~~~~~~~~~

* TBD Remove deprecated code (2020-09) (`#13939`_)

Notes
-----

This release provides `pre-compiled binaries
<https://github.com/RobotLocomotion/drake/releases/tag/v0.23.0>`__ named
``drake-YYYYMMDD-{bionic|focal|mac}.tar.gz``. See :ref:`Nightly Releases
<nightly-releases>` for instructions on how to use them.

Drake binary releases incorporate a pre-compiled version of `SNOPT
<https://ccom.ucsd.edu/~optimizers/solvers/snopt/>`__ as part of the
`Mathematical Program toolbox
<https://drake.mit.edu/doxygen_cxx/group__solvers.html>`__. Thanks to
Philip E. Gill and Elizabeth Wong for their kind support.

.. <begin issue links>
.. _#13773: https://github.com/RobotLocomotion/drake/pull/13773
.. _#13860: https://github.com/RobotLocomotion/drake/pull/13860
.. _#13864: https://github.com/RobotLocomotion/drake/pull/13864
.. _#13867: https://github.com/RobotLocomotion/drake/pull/13867
.. _#13870: https://github.com/RobotLocomotion/drake/pull/13870
.. _#13872: https://github.com/RobotLocomotion/drake/pull/13872
.. _#13873: https://github.com/RobotLocomotion/drake/pull/13873
.. _#13877: https://github.com/RobotLocomotion/drake/pull/13877
.. _#13878: https://github.com/RobotLocomotion/drake/pull/13878
.. _#13879: https://github.com/RobotLocomotion/drake/pull/13879
.. _#13882: https://github.com/RobotLocomotion/drake/pull/13882
.. _#13883: https://github.com/RobotLocomotion/drake/pull/13883
.. _#13886: https://github.com/RobotLocomotion/drake/pull/13886
.. _#13889: https://github.com/RobotLocomotion/drake/pull/13889
.. _#13890: https://github.com/RobotLocomotion/drake/pull/13890
.. _#13891: https://github.com/RobotLocomotion/drake/pull/13891
.. _#13893: https://github.com/RobotLocomotion/drake/pull/13893
.. _#13900: https://github.com/RobotLocomotion/drake/pull/13900
.. _#13907: https://github.com/RobotLocomotion/drake/pull/13907
.. _#13908: https://github.com/RobotLocomotion/drake/pull/13908
.. _#13915: https://github.com/RobotLocomotion/drake/pull/13915
.. _#13922: https://github.com/RobotLocomotion/drake/pull/13922
.. _#13925: https://github.com/RobotLocomotion/drake/pull/13925
.. _#13939: https://github.com/RobotLocomotion/drake/pull/13939
.. _#13940: https://github.com/RobotLocomotion/drake/pull/13940
.. _#13941: https://github.com/RobotLocomotion/drake/pull/13941
.. _#13943: https://github.com/RobotLocomotion/drake/pull/13943
.. _#13955: https://github.com/RobotLocomotion/drake/pull/13955
.. _#13959: https://github.com/RobotLocomotion/drake/pull/13959
.. _#13965: https://github.com/RobotLocomotion/drake/pull/13965
.. _#13966: https://github.com/RobotLocomotion/drake/pull/13966
.. _#13967: https://github.com/RobotLocomotion/drake/pull/13967
.. _#13968: https://github.com/RobotLocomotion/drake/pull/13968
.. _#13969: https://github.com/RobotLocomotion/drake/pull/13969
.. _#13971: https://github.com/RobotLocomotion/drake/pull/13971
.. _#13972: https://github.com/RobotLocomotion/drake/pull/13972
.. _#13974: https://github.com/RobotLocomotion/drake/pull/13974
.. _#13976: https://github.com/RobotLocomotion/drake/pull/13976
.. _#13981: https://github.com/RobotLocomotion/drake/pull/13981
.. _#13982: https://github.com/RobotLocomotion/drake/pull/13982
.. <end issue links>

..
  Current oldest_commit 0de592fdd53d55132b45a7a7c86b979a99f561e4 (exclusive).
  Current newest_commit 3fa01607422543965b4e368796e894a5c29687b7 (inclusive).
