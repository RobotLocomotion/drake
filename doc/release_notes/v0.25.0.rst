.. This document is the template used by tools/dev/relnotes.

*************
Drake v0.25.0
*************

Announcements
-------------

* Drake no longer supports for macOS Mojave 10.14 (`#14352`_); it only
  supports Catalina 10.15.  Work is underway to support Big Sur 11.

Breaking changes since v0.24.0
------------------------------

* systems: Move spring_mass_system to a test utility (`#14284`_) This is a
  breaking change for anyone who was using this plant via the precompiled
  binaries.
* [proximity] Implement Mesh for proximity via its convex hull (`#14351`_)
  Anyone with a mesh registered with a proximity role will start observing
  proximity query results where there were none before.
* Replace robotlocomotion.robot_plan_t with drake.lcmt_robot_plan (`#14377`_)
  EncodeKeyFrames, MoveIkDemoBase, and RobotPlanInterpolator and their
  associated demos (move_iiwa_ee, move_jaco_rr, kuka_plan_runner, etc.), now
  operate on lcmt_robot_plan messages, not robot_plan_t
  messages. EncodeKeyFrames no longer takes an "info" argument -- the message
  no longer contains the unused snopt integer.
* Remove pydrake.common.cpp_const and pydrake.third_party (`#14270`_).
* [render] Remove RenderEngineOspray entirely (`#14339`_)

Changes since v0.24.0
---------------------

Dynamical Systems
~~~~~~~~~~~~~~~~~

.. <relnotes for systems go here>

New features

* systems/traj opt: Return multiple shooting constraints for
  AddConstraintToAllKnotPoints and AddEqualTimeIntervalsConstraints (`#14340`_)
* diagram builder: introduce AddNamedSystem sugar (`#14404`_)
* camera_info: Permit constructing from intrinsic matrix (`#14402`_)
* diagram/builder: Implement fan-out of diagram inputs (`#14361`_)

Fixes

* TBD

Mathematical Program
~~~~~~~~~~~~~~~~~~~~

.. <relnotes for solvers go here>

New features

* Aggregate BoundingBoxConstraint (`#14248`_)
* MosekSolver supports quadratic cost with nonlinear conic constraints (`#14237`_)

Fixes

* Throw an error when getting dual solution for a QCP in gurobi (`#14285`_)
* Only retrieve Mosek dual solution when there is no integer variables (`#14338`_)
* retrieve linear constraint dual from Mosek result (`#14348`_)

Multibody Dynamics
~~~~~~~~~~~~~~~~~~

.. <relnotes for geometry,multibody go here>

New features

* Add base-line color images to RenderEngineGl (no textured objects) (`#14226`_)
* Add ConstitutiveModel and DeformationGradientCache (`#14236`_)
* add (almost all) missing py scenegraph inspector bindings (`#14259`_)
* Add color images with textured objects (`#14260`_)
* Use the new box mesh in hydroelastic contact model (`#14251`_)
* Allow force publish calls on DrakeVisualizer (`#14304`_)
* Add PackageMap Remove method (`#14301`_)
* Add FemElement and FemState (`#14263`_)
* [rendering] Give RenderEngineGl access to full camera intrinsics (`#14289`_)
* Add parsing for reflected inertia parameters (`#14323`_)
* py mbp: Bind MultibodyPlant.GetBodiesWeldedTo (`#14345`_)
* [render] Fully account for full camera intrinsics in RenderEngine ecosystem (`#14357`_)
* Add FemModel and the concrete ElasticityModel (`#14317`_)
* Cache/CacheEntry rename (`#14364`_)  # * Rename DeformationGradientCache to DeformationGradientCacheEntry and rename ElementCache to ElementCacheEntry.
* Rename LinearElasticityModel to LinearConstitutiveModel (`#14365`_)
* render_engine_gl: Make tex_coord be effectively optional (`#14396`_)
* make penetration query work for some simple geometries with AutoDiffScalars (`#14378`_)
* Enhance documentation for bodies & frames and monogram notation for spatial velocity/acceleration (`#14397`_)
* Add stiffness and tangent matrix calculation for FEM (`#14374`_)
* Implements the effect of reflected inertia (`#14167`_)
* [geometry] Add new geometry::DrakeVisualizer system (`#14247`_)

Fixes

* geometry: Fix QueryObject doc typo (`#14253`_)
* gl_renderer: Fix stub factory for macOS build (`#14256`_)
* Clean up and deprecation of SceneGraphInspector/QueryObject bindings (`#14280`_)
* Remove usage of uninitialized values (`#14313`_)
* Rename FemElasticity to ElasticityElement (`#14307`_)
* [pydrake] Update RenderEngine python trampoline - omit soon-to-be-removed API (`#14300`_)
* Propagate joint default positions through scalar conversion (`#14347`_)
* throw an exception in relevant center of mass methods if composite_mass <= 0 (`#14316`_)
* Remove MBP's awareness of SG<AutoDiff> support (`#14324`_)
* multibody: add ValidateContext() to methods that take a context (`#14389`_)
* fixes missing multibody graph accounting (`#14411`_)
* Document that body spatial velocity/acceleration methods are for point Bo (not point Bcm) (`#14382`_)

Tutorials and examples
~~~~~~~~~~~~~~~~~~~~~~

.. <relnotes for examples,tutorials go here>
* Minor fixes for flake8's F821 (undefined name) error (`#14293`_)
* meshcat: upgrade interface to use QueryObject (`#14292`_)
* Change to use SetInitialGuess in the nlp tutorial (`#14331`_)
* Allegro with reflected inertia (`#14204`_)
* dualshock: Update example to use Logitech controller (`#14388`_)
* Add a tutorial on quadratic program (`#14403`_)

Miscellaneous features and fixes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. <relnotes for common,math,lcm,lcmtypes,manipulation,perception go here>
* Use package instead of relative path for allegro model files (`#14252`_)
* systems/lcm: Add LcmScopeSystem (`#14308`_)
* yaml: Correctly emit variants with templated inner types (`#14327`_)
* yaml: Fix parsing bugs with zero-sized matrices (`#14360`_)
* Expose new methods at symbolic_decompose (`#14353`_)

pydrake bindings
~~~~~~~~~~~~~~~~

.. <relnotes for bindings go here>

New features

*.multibody: add binding for CalcCenterOfMassPosition taking model instances (`#14249`_)
* TBD

Fixes

* Correct bindings for DrakeVisualizer.AddToBuilder (`#14314`_)
* meshcat visualizer: remove period which causes an error outside of drake (`#14320`_)
* pydrake: Fix type bug in BasicVector::set_value for non-float types (`#14343`_)
* py examples: Ensure manipulation_station_py.cc imports dep modules (`#14370`_)
* py systems: Add keep_alive cycle to DiagramBuilder.AddSystem (`#14356`_)
* py geometry: Fix bindings for RenderCamera classes (`#14394`_)
* TBD

Newly bound

* pydrake.geometry.ContactSurface (`#14244`_)
* pydrake.geometry.SurfaceMesh.centroid (`#14244`_)
* pydrake.multibody.plant.ContactResults.hydroelastic_contact_info (`#14244`_)
* pydrake.multibody.plant.ContactResults.num_hydroelastic_contacts (`#14244`_)
* pydrake.multibody.plant.HydroelasticContactInfo (`#14244`_)
* pydrake.multibody.plant.MultibodyPlant.get_mutable_joint (`#14257`_)
* pydrake.multibody.plant.MultibodyPlant.GetJointIndices (`#14257`_)
* pydrake.multibody.tree.Body.CalcCenterOfMassInBodyFrame (`#14207`_)
* pydrake.multibody.tree.Body.CalcSpatialInertiaInBodyFrame (`#14207`_)
* pydrake.multibody.tree.Body.EvalPoseInWorld (`#14207`_)
* pydrake.multibody.tree.Body.EvalSpatialAccelerationInWorld (`#14207`_)
* pydrake.multibody.tree.Body.EvalSpatialVelocityInWorld (`#14207`_)
* pydrake.multibody.tree.Body.get_default_mass (`#14207`_)
* pydrake.multibody.tree.Body.get_mass (`#14207`_)
* pydrake.multibody.tree.Body.get_num_flexible_positions (`#14207`_)
* pydrake.multibody.tree.Body.get_num_flexible_velocities (`#14207`_)
* pydrake.multibody.tree.Body.has_quaternion_dofs (`#14207`_)
* pydrake.multibody.tree.Frame.CalcOffsetPoseInBody (`#14207`_)
* pydrake.multibody.tree.Frame.CalcOffsetRotationMatrixInBody (`#14207`_)
* pydrake.multibody.tree.Frame.CalcPose (`#14207`_)
* pydrake.multibody.tree.Frame.CalcPoseInWorld (`#14207`_)
* pydrake.multibody.tree.Frame.CalcRotationMatrix (`#14207`_)
* pydrake.multibody.tree.Frame.CalcRotationMatrixInBodyFrame (`#14207`_)
* pydrake.multibody.tree.Frame.CalcRotationMatrixInWorld (`#14207`_)
* pydrake.multibody.tree.Frame.CalcSpatialAccelerationInWorld (`#14207`_)
* pydrake.multibody.tree.Frame.CalcSpatialVelocity (`#14207`_)
* pydrake.multibody.tree.Frame.CalcSpatialVelocityInWorld (`#14207`_)
* pydrake.multibody.tree.Frame.GetFixedOffsetPoseInBody (`#14207`_)
* pydrake.multibody.tree.Frame.GetFixedPoseInBodyFrame (`#14207`_)
* pydrake.multibody.tree.Frame.GetFixedRotationMatrixInBody (`#14207`_)
* pydrake.multibody.tree.Frame.GetFixedRotationMatrixInBodyFrame (`#14207`_)
* pydrake.multibody.tree.Frame.is_world_frame (`#14207`_)
* pydrake.solvers.mathematicalprogram.PyFunctionConstraint (`#14410`_)
* pydrake.symbolic.DecomposeAffineExpression (`#14353`_)
* pydrake.symbolic.DecomposeAffineExpressions (`#14353`_)
* pydrake.symbolic.DecomposeLinearExpressions (`#14353`_)
* pydrake.symbolic.DecomposeQuadraticPolynomial (`#14353`_)
* pydrake.symbolic.ExtractVariablesFromExpression (`#14353`_)
* pydrake.symbolic.GetVariableVector (`#14353`_)
* pydrake.symbolic.MakeMatrixBinaryVariable (`#14342`_)
* pydrake.symbolic.MakeMatrixBooleanVariable (`#14342`_)
* pydrake.symbolic.MakeMatrixContinuousVariable (`#14342`_)
* pydrake.symbolic.MakeMatrixVariable (`#14342`_)
* pydrake.symbolic.MakeVectorBinaryVariable (`#14342`_)
* pydrake.symbolic.MakeVectorBooleanVariable (`#14342`_)
* pydrake.symbolic.MakeVectorContinuousVariable (`#14342`_)
* pydrake.symbolic.MakeVectorVariable (`#14342`_)
* pydrake.symbolic.Variable.get_name (`#14342`_)
* TBD

Build system and dependencies
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. <relnotes for attic,cmake,doc,setup,third_party,tools go here>

* Add dependency on double-conversion (`#14392`_)
* Add dependency on lzma (`#14392`_)
* Add dependency on six (`#14390`_)
* Add dependency on sqlite3 (`#14392`_)
* Upgrade fcl to latest commit (`#14271`_)
* Upgrade fmt to latest release 7.1.3 (`#14272`_, `#14413`_)
* Upgrade ghc_filesystem to latest release 1.3.8 (`#14273`_, `#14414`_)
* Upgrade ignition_math to latest release 6.7.0 (`#14415`_)
* Upgrade intel_realsense_ros to latest release 2.2.20 (`#14274`_, `#14416`_)
* Upgrade lcm to latest commit (`#14275`_, `#14418`_)
* Upgrade meshcat_python to latest commit (`#14417`_)
* Upgrade ros_xacro to latest release 1.13.9 (`#14276`_)
* Upgrade rules_pkg to latest release 0.3.0 (`#14277`_)
* Upgrade rules_python to latest release 0.1.0 (`#14278`_)
* Upgrade to rebuilt VTK binaries (`#14393`_, `#14395`_)
* Neither compile docs nor install documentation prereqs by default (`#14168`_)
* Add kcov_merge tool to consolidate results; for performance, coverage runs no longer consolidate by default (`#14294`_)
* Changes specific to Ubuntu:

  * Add libspdlog-dev for Ubuntu 20.04 Focal only (`#14429`_)
  * Remove dependency on libtbb2 (`#14395`_, `#14339`_)

* Changes specific to macOS:

  * Rebuild drake-visualizer (`#14395`_)
  * Fix compatibility vs Homebrew python3.8 (`#14395`_, `#14428`_)
  * Remove support for Mojave 10.14 (`#14352`_)
  * Remove support for building documentation (`#14350`_)
  * Pin to older ipopt 3.11 formula (`#14288`_)

Newly-deprecated APIs
~~~~~~~~~~~~~~~~~~~~~

* TBD lcmtypes: Deprecate unused messages (`#14372`_)
* Deprecate geometry data as State in SceneGraph (`#14245`_)
* Clean up and deprecation of SceneGraphInspector/QueryObject bindings (`#14280`_)
* Deprecate RgbdSensor's CameraProperties API (`#14358`_)
* [geometry] Deprecate kDim in SurfaceMesh and VolumeMesh (`#14420`_)
* [render] Deprecate RenderEngine::Render*Image(CameraProperties) API (`#14359`_)
* [render] Deprecate CameraProperties and DepthCameraProperties (`#14376`_)
* [geometry] Deprecate geometry_visualization (and old ConnectDrakeVisualizer) (`#14282`_)
* [render] Deprecate ManipulationStation CameraProperties API (`#14375`_)
* TBD

Removal of deprecated items
~~~~~~~~~~~~~~~~~~~~~~~~~~~

* drake::pydrake::py_reference (`14267`_)
* drake::pydrake::py_reference_internal (`14267`_)
* examples/irb140/urdf (`14267`_)
* examples/kuka_iiwa_arm/models/objects/big_robot_toy.urdf (`14267`_)
* manipulation/models/wsg_50_description URDF and meshes (`14267`_)
* bullet, freetype2 externals (`#14398`_)
* drake::systems::kAutoSize (`#14398`_)
* drake::systems::Subvector empty constructor (`#14398`_)
* drake::math::Slerp (`#14398`_)
* drake::systems::Simulator: time jumps warning (`#14398`_)

Notes
-----

This release provides `pre-compiled binaries
<https://github.com/RobotLocomotion/drake/releases/tag/v0.25.0>`__ named
``drake-YYYYMMDD-{bionic|focal|mac}.tar.gz``. See :ref:`Nightly Releases
<nightly-releases>` for instructions on how to use them.

Drake binary releases incorporate a pre-compiled version of `SNOPT
<https://ccom.ucsd.edu/~optimizers/solvers/snopt/>`__ as part of the
`Mathematical Program toolbox
<https://drake.mit.edu/doxygen_cxx/group__solvers.html>`__. Thanks to
Philip E. Gill and Elizabeth Wong for their kind support.

.. <begin issue links>
.. _#14167: https://github.com/RobotLocomotion/drake/pull/14167
.. _#14168: https://github.com/RobotLocomotion/drake/pull/14168
.. _#14204: https://github.com/RobotLocomotion/drake/pull/14204
.. _#14207: https://github.com/RobotLocomotion/drake/pull/14207
.. _#14208: https://github.com/RobotLocomotion/drake/pull/14208
.. _#14226: https://github.com/RobotLocomotion/drake/pull/14226
.. _#14236: https://github.com/RobotLocomotion/drake/pull/14236
.. _#14237: https://github.com/RobotLocomotion/drake/pull/14237
.. _#14244: https://github.com/RobotLocomotion/drake/pull/14244
.. _#14245: https://github.com/RobotLocomotion/drake/pull/14245
.. _#14247: https://github.com/RobotLocomotion/drake/pull/14247
.. _#14248: https://github.com/RobotLocomotion/drake/pull/14248
.. _#14249: https://github.com/RobotLocomotion/drake/pull/14249
.. _#14251: https://github.com/RobotLocomotion/drake/pull/14251
.. _#14252: https://github.com/RobotLocomotion/drake/pull/14252
.. _#14253: https://github.com/RobotLocomotion/drake/pull/14253
.. _#14256: https://github.com/RobotLocomotion/drake/pull/14256
.. _#14257: https://github.com/RobotLocomotion/drake/pull/14257
.. _#14259: https://github.com/RobotLocomotion/drake/pull/14259
.. _#14260: https://github.com/RobotLocomotion/drake/pull/14260
.. _#14263: https://github.com/RobotLocomotion/drake/pull/14263
.. _#14267: https://github.com/RobotLocomotion/drake/pull/14267
.. _#14270: https://github.com/RobotLocomotion/drake/pull/14270
.. _#14271: https://github.com/RobotLocomotion/drake/pull/14271
.. _#14272: https://github.com/RobotLocomotion/drake/pull/14272
.. _#14273: https://github.com/RobotLocomotion/drake/pull/14273
.. _#14274: https://github.com/RobotLocomotion/drake/pull/14274
.. _#14275: https://github.com/RobotLocomotion/drake/pull/14275
.. _#14276: https://github.com/RobotLocomotion/drake/pull/14276
.. _#14277: https://github.com/RobotLocomotion/drake/pull/14277
.. _#14278: https://github.com/RobotLocomotion/drake/pull/14278
.. _#14280: https://github.com/RobotLocomotion/drake/pull/14280
.. _#14282: https://github.com/RobotLocomotion/drake/pull/14282
.. _#14283: https://github.com/RobotLocomotion/drake/pull/14283
.. _#14284: https://github.com/RobotLocomotion/drake/pull/14284
.. _#14285: https://github.com/RobotLocomotion/drake/pull/14285
.. _#14288: https://github.com/RobotLocomotion/drake/pull/14288
.. _#14289: https://github.com/RobotLocomotion/drake/pull/14289
.. _#14292: https://github.com/RobotLocomotion/drake/pull/14292
.. _#14293: https://github.com/RobotLocomotion/drake/pull/14293
.. _#14294: https://github.com/RobotLocomotion/drake/pull/14294
.. _#14296: https://github.com/RobotLocomotion/drake/pull/14296
.. _#14300: https://github.com/RobotLocomotion/drake/pull/14300
.. _#14301: https://github.com/RobotLocomotion/drake/pull/14301
.. _#14303: https://github.com/RobotLocomotion/drake/pull/14303
.. _#14304: https://github.com/RobotLocomotion/drake/pull/14304
.. _#14307: https://github.com/RobotLocomotion/drake/pull/14307
.. _#14308: https://github.com/RobotLocomotion/drake/pull/14308
.. _#14311: https://github.com/RobotLocomotion/drake/pull/14311
.. _#14313: https://github.com/RobotLocomotion/drake/pull/14313
.. _#14314: https://github.com/RobotLocomotion/drake/pull/14314
.. _#14316: https://github.com/RobotLocomotion/drake/pull/14316
.. _#14317: https://github.com/RobotLocomotion/drake/pull/14317
.. _#14320: https://github.com/RobotLocomotion/drake/pull/14320
.. _#14323: https://github.com/RobotLocomotion/drake/pull/14323
.. _#14324: https://github.com/RobotLocomotion/drake/pull/14324
.. _#14327: https://github.com/RobotLocomotion/drake/pull/14327
.. _#14331: https://github.com/RobotLocomotion/drake/pull/14331
.. _#14338: https://github.com/RobotLocomotion/drake/pull/14338
.. _#14339: https://github.com/RobotLocomotion/drake/pull/14339
.. _#14340: https://github.com/RobotLocomotion/drake/pull/14340
.. _#14342: https://github.com/RobotLocomotion/drake/pull/14342
.. _#14343: https://github.com/RobotLocomotion/drake/pull/14343
.. _#14345: https://github.com/RobotLocomotion/drake/pull/14345
.. _#14347: https://github.com/RobotLocomotion/drake/pull/14347
.. _#14348: https://github.com/RobotLocomotion/drake/pull/14348
.. _#14350: https://github.com/RobotLocomotion/drake/pull/14350
.. _#14351: https://github.com/RobotLocomotion/drake/pull/14351
.. _#14352: https://github.com/RobotLocomotion/drake/pull/14352
.. _#14353: https://github.com/RobotLocomotion/drake/pull/14353
.. _#14356: https://github.com/RobotLocomotion/drake/pull/14356
.. _#14357: https://github.com/RobotLocomotion/drake/pull/14357
.. _#14358: https://github.com/RobotLocomotion/drake/pull/14358
.. _#14359: https://github.com/RobotLocomotion/drake/pull/14359
.. _#14360: https://github.com/RobotLocomotion/drake/pull/14360
.. _#14361: https://github.com/RobotLocomotion/drake/pull/14361
.. _#14364: https://github.com/RobotLocomotion/drake/pull/14364
.. _#14365: https://github.com/RobotLocomotion/drake/pull/14365
.. _#14370: https://github.com/RobotLocomotion/drake/pull/14370
.. _#14371: https://github.com/RobotLocomotion/drake/pull/14371
.. _#14372: https://github.com/RobotLocomotion/drake/pull/14372
.. _#14374: https://github.com/RobotLocomotion/drake/pull/14374
.. _#14375: https://github.com/RobotLocomotion/drake/pull/14375
.. _#14376: https://github.com/RobotLocomotion/drake/pull/14376
.. _#14377: https://github.com/RobotLocomotion/drake/pull/14377
.. _#14378: https://github.com/RobotLocomotion/drake/pull/14378
.. _#14379: https://github.com/RobotLocomotion/drake/pull/14379
.. _#14382: https://github.com/RobotLocomotion/drake/pull/14382
.. _#14388: https://github.com/RobotLocomotion/drake/pull/14388
.. _#14389: https://github.com/RobotLocomotion/drake/pull/14389
.. _#14390: https://github.com/RobotLocomotion/drake/pull/14390
.. _#14391: https://github.com/RobotLocomotion/drake/pull/14391
.. _#14392: https://github.com/RobotLocomotion/drake/pull/14392
.. _#14393: https://github.com/RobotLocomotion/drake/pull/14393
.. _#14394: https://github.com/RobotLocomotion/drake/pull/14394
.. _#14395: https://github.com/RobotLocomotion/drake/pull/14395
.. _#14396: https://github.com/RobotLocomotion/drake/pull/14396
.. _#14397: https://github.com/RobotLocomotion/drake/pull/14397
.. _#14398: https://github.com/RobotLocomotion/drake/pull/14398
.. _#14402: https://github.com/RobotLocomotion/drake/pull/14402
.. _#14403: https://github.com/RobotLocomotion/drake/pull/14403
.. _#14404: https://github.com/RobotLocomotion/drake/pull/14404
.. _#14406: https://github.com/RobotLocomotion/drake/pull/14406
.. _#14410: https://github.com/RobotLocomotion/drake/pull/14410
.. _#14411: https://github.com/RobotLocomotion/drake/pull/14411
.. _#14413: https://github.com/RobotLocomotion/drake/pull/14413
.. _#14414: https://github.com/RobotLocomotion/drake/pull/14414
.. _#14415: https://github.com/RobotLocomotion/drake/pull/14415
.. _#14416: https://github.com/RobotLocomotion/drake/pull/14416
.. _#14417: https://github.com/RobotLocomotion/drake/pull/14417
.. _#14418: https://github.com/RobotLocomotion/drake/pull/14418
.. _#14420: https://github.com/RobotLocomotion/drake/pull/14420
.. _#14425: https://github.com/RobotLocomotion/drake/pull/14425
.. _#14428: https://github.com/RobotLocomotion/drake/pull/14428
.. _#14429: https://github.com/RobotLocomotion/drake/pull/14429
.. _#14430: https://github.com/RobotLocomotion/drake/pull/14430
.. _#14433: https://github.com/RobotLocomotion/drake/pull/14433
.. <end issue links>

..
  Current oldest_commit b0b75133ad6de545f6634e5380878c4b706e15dc (exclusive).
  Current newest_commit 5b5d6aa8efbd57cbf1fc7b1fdd95d78210290668 (inclusive).
