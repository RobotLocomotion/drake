*************
Drake v0.22.0
*************

Announcements
-------------

TBD

Breaking changes since v0.21.0
------------------------------

* drake::multibody::Joint gained a new pure virtual method do_set_default_positions (`#13757`_)
* pydrake's deprecation infrastructure now must always be given a removal date, either as embedded in the message or via the new date= kwarg (`#13730`_)
* Several stale forks of SDFormat models were removed from the Atlas example (`#13758`_)

Changes since v0.21.0:
----------------------

Dynamical Systems
~~~~~~~~~~~~~~~~~

New features

* TBD

Fixes

* TBD

Mathematical Program
~~~~~~~~~~~~~~~~~~~~

New features

* TBD Add examples on sum-of-squares (`#13719`_)
* TBD Add two more examples on SOS optimization (`#13746`_, `#13759`_, `#13765`_)
* TBD Fix a bug when customizing the quadratic cost (`#13752`_)
* TBD MPResult::GetSolution also works for a polynomial (`#13748`_)
* TBD Add symbolic ChebyshevPolynomial (`#13751`_)
* TBD Add GetKnownSolvers (`#13821`_)

Fixes

* TBD

Multibody Dynamics
~~~~~~~~~~~~~~~~~~

New features

* Add PlanarMobilizer and PlanarJoint (`#13711`_, `#13747`_, `#13813`_)
* Add support for parsing SDF and URDF from strings (`#13814`_)

Fixes

* Make contact results deterministic (`#13737`_)
* Contact results will differ slightly from prior releases (`#13734`_)
* Joint::set_default_positions updates the underlying mobilizer (`#13757`_)
* Fix formatting in TAMSI error message (`#13802`_)

Tutorials and examples
~~~~~~~~~~~~~~~~~~~~~~

* Add support for "planar visualization" in meshcat (`#13755`_)
* Use planar visualization in the ManipulationStation demos (`#13755`_)

Miscellaneous features and fixes
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

* Reformat all XML files with xmllint (`#13768`_)
* Upgrade all models to use SDFormat 1.7 syntax (`#13772`_, `#13774`_, `#13758`_)
* yaml: Add YamlWriteArchive::EraseMatchingMaps (`#13699`_)

pydrake bindings
~~~~~~~~~~~~~~~~

New features

* Redirect drake's logs to the Python ``logging`` module instead of stderr (`#13568`_, `#13781`_)
* Deprecation annotations may pass a date=YYYY-MM-DD kwarg (`#13730`_)

Fixes

* TBD

Newly bound

* pydrake.common.eigen_geometry.Quaternion.slerp (`#13810`_)

Build system and dependencies
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

* Add preliminary support for bootstrapping Google Colab (`#13697`_, `#13795`_)
* Rename libspdlog.so to libdrake_spdlog.so (`#13698`_)
* Upgrade recommended Bazel version to 3.4 (`#13743`_)
* Upgrade buildifier to latest release 3.4.0 (`#13791`_)
* Upgrade fcl to latest commit (`#13787`_)
* Upgrade fmt to latest release 7.0.2 (`#13788`_)
* Upgrade meshcat to latest commit (`#13755`_)
* Upgrade meshcat_python to latest commit (`#13755`_, `#13806`_)
* Upgrade models to latest commit (`#13786`_)
* Upgrade pybind11 fork to latest commit (`#13801`_)
* Upgrade ros_xacro to latest release 1.13.6 (`#13790`_)
* Upgrade scs to latest release 2.1.2 (`#13789`_)
* Upgrade styleguide latest commit (`#13804`_)
* Do not install gl_renderer's private headers (`#13807`_)

Newly-deprecated APIs
~~~~~~~~~~~~~~~~~~~~~

* drake::math::Slerp (`#13810`_)

Removal of deprecated items
~~~~~~~~~~~~~~~~~~~~~~~~~~~

* drake::Polynomial::IsApprox (`#13785`_)
* drake::systems::Simulator::reset_integrator (`#13785`_)
* drake::trajectories::PiecewisePolynomial<T>::PolynomialType (`#13785`_)
* pydrake.polynomial.Polynomial.IsApprox (`#13785`_)
* pydrake.systems.analysis.Simulator.reset_integrator (`#13785`_)
* pydrake.systems.framework.AbstractValue (`#13785`_)
* pydrake.systems.framework.Value (`#13785`_)
* The bitbucket.bzl macros (`#13785`_)
* The tinydir external (`#13785`_)

Notes
-----

This release provides `pre-compiled binaries
<https://github.com/RobotLocomotion/drake/releases/tag/v0.22.0>`__ named
``drake-YYYYMMDD-{bionic|focal|mac}.tar.gz``. See :ref:`Nightly Releases
<nightly-releases>` for instructions on how to use them.

Drake binary releases incorporate a pre-compiled version of `SNOPT
<https://ccom.ucsd.edu/~optimizers/solvers/snopt/>`__ as part of the
`Mathematical Program toolbox
<https://drake.mit.edu/doxygen_cxx/group__solvers.html>`__. Thanks to
Philip E. Gill and Elizabeth Wong for their kind support.

..
  Current oldest_commit e6aec974fbca64751e0d35a3eafc739d059e9275 (inclusive).
  Current newest_commit 1d12e67d9abe785a0d16891ba196deff0b9629aa (inclusive).

* common: schema: Incorporate some Anzu nit fixes (`#13822`_)
* common: Add PolynomialBasisElement class, and an implementation of ChebyshevBasisElement (`#13796`_)
* doc,setup: Prune unwanted dependencies and reorganize (`#13753`_)
* examples: Example of a cloth system modeled as a collection of springs (`#13714`_)  # * Add a mass-spring cloth example. The example models a rectangular piece of cloth with particles connected by springs and dampers. The example supports both continuous and discrete mode.
* common: schema: Copy rotation,transform from Anzu (`#13823`_)  # Co-authored-by: Grant Gould <ggould@tri.global> Co-authored-by: Sam Creasey <sam.creasey@tri.global> Co-authored-by: Siyuan Feng <siyuan.feng@tri.global>
* common: schema: Adapt rotation,transform to Drake and add to BUILD (`#13823`_)
* setup: setup: Export all of the package list text files (`#13827`_)  # We missed this in 06604c29e3c9c276646b0a5a7fbfd651d8e7049b.
* bindings: bindings: Bind pydrake.multibody.Parser.AddModelFromString (`#13826`_)
* setup: setup: Really export the package list text files (`#13830`_)  # * setup: really export the package list text files I typo'd this in 04e15ce3a4607917b2cc05592eb0c00116b91fe3.
