#include "pybind11/eigen.h"
#include "pybind11/pybind11.h"
#include "pybind11/stl.h"

#include "drake/bindings/pydrake/documentation_pybind.h"
#include "drake/bindings/pydrake/pydrake_pybind.h"
#include "drake/common/trajectories/piecewise_polynomial.h"
#include "drake/common/trajectories/trajectory.h"

namespace drake {
namespace pydrake {

PYBIND11_MODULE(trajectories, m) {
  // NOLINTNEXTLINE(build/namespaces): Emulate placement in namespace.
  using namespace drake::trajectories;
  constexpr auto& doc = pydrake_doc.drake.trajectories;

  using T = double;

  py::class_<Trajectory<T>>(m, "Trajectory", doc.Trajectory.doc);

  py::class_<PiecewiseTrajectory<T>, Trajectory<T>>(m, "PiecewiseTrajectory",
      doc.PiecewiseTrajectory.doc)
      .def("get_number_of_segments",
           &PiecewiseTrajectory<T>::get_number_of_segments,
          doc.PiecewiseTrajectory.get_number_of_segments.doc)
      .def("start_time", overload_cast_explicit<double, int>(
                             &PiecewiseTrajectory<T>::start_time),
          doc.PiecewiseTrajectory.start_time.doc)
      .def("end_time", overload_cast_explicit<double, int>(
                           &PiecewiseTrajectory<T>::end_time),
          doc.PiecewiseTrajectory.end_time.doc)
      .def("duration", &PiecewiseTrajectory<T>::duration,
          doc.PiecewiseTrajectory.duration.doc)
      .def("start_time",
           overload_cast_explicit<double>(&PiecewiseTrajectory<T>::start_time),
               doc.PiecewiseTrajectory.start_time.doc)
      .def("end_time",
           overload_cast_explicit<double>(&PiecewiseTrajectory<T>::end_time),
               doc.PiecewiseTrajectory.end_time.doc)
      .def("get_segment_index", &PiecewiseTrajectory<T>::get_segment_index,
          doc.PiecewiseTrajectory.get_segment_index.doc)
      .def("get_segment_times", &PiecewiseTrajectory<T>::get_segment_times,
          doc.PiecewiseTrajectory.get_segment_times.doc);

  py::class_<PiecewisePolynomial<T>, PiecewiseTrajectory<T>>(
      m, "PiecewisePolynomial", doc.PiecewisePolynomial.doc)
      .def(py::init<>(), doc.PiecewisePolynomial.ctor.doc_3)
      .def(py::init<const Eigen::Ref<const MatrixX<T>>&>(),
          doc.PiecewisePolynomial.ctor.doc_4)
      .def_static("ZeroOrderHold",
                  py::overload_cast<const Eigen::Ref<const Eigen::VectorXd>&,
                                    const Eigen::Ref<const MatrixX<T>>&>(
                      &PiecewisePolynomial<T>::ZeroOrderHold),
          doc.PiecewisePolynomial.ZeroOrderHold.doc)
      .def_static("FirstOrderHold",
                  py::overload_cast<const Eigen::Ref<const Eigen::VectorXd>&,
                                    const Eigen::Ref<const MatrixX<T>>&>(
                      &PiecewisePolynomial<T>::FirstOrderHold),
        doc.PiecewisePolynomial.FirstOrderHold.doc)
      .def_static("Pchip",
                  py::overload_cast<const Eigen::Ref<const Eigen::VectorXd>&,
                                    const Eigen::Ref<const MatrixX<T>>&, bool>(
                      &PiecewisePolynomial<T>::Pchip),
        doc.PiecewisePolynomial.Pchip.doc)
      .def_static("Cubic",
                  py::overload_cast<const Eigen::Ref<const Eigen::VectorXd>&,
                                    const Eigen::Ref<const MatrixX<T>>&,
                                    const Eigen::Ref<const VectorX<T>>&,
                                    const Eigen::Ref<const VectorX<T>>&>(
                      &PiecewisePolynomial<T>::Cubic),
                  py::arg("breaks"), py::arg("knots"),
                  py::arg("knot_dot_start"), py::arg("knot_dot_end"),
                      doc.PiecewisePolynomial.Cubic.doc)
      .def_static("Cubic",
                  py::overload_cast<const Eigen::Ref<const Eigen::VectorXd>&,
                                    const Eigen::Ref<const MatrixX<T>>&,
                                    const Eigen::Ref<const MatrixX<T>>&>(
                      &PiecewisePolynomial<T>::Cubic),
                  py::arg("breaks"), py::arg("knots"), py::arg("knots_dot"),
          doc.PiecewisePolynomial.Cubic.doc_2)
      .def_static("Cubic",
                  py::overload_cast<const Eigen::Ref<const Eigen::VectorXd>&,
                                    const Eigen::Ref<const MatrixX<T>>&,
                                    bool>(
                      &PiecewisePolynomial<T>::Cubic),
                  py::arg("breaks"), py::arg("knots"), py::arg("periodic_end"),
          doc.PiecewisePolynomial.Cubic.doc_3)
      .def("value", &PiecewisePolynomial<T>::value,
          doc.PiecewisePolynomial.value.doc)
      .def("derivative", &PiecewisePolynomial<T>::derivative,
          doc.PiecewisePolynomial.derivative.doc)
      .def("rows", &PiecewisePolynomial<T>::rows,
          doc.PiecewisePolynomial.rows.doc)
      .def("cols", &PiecewisePolynomial<T>::cols,
          doc.PiecewisePolynomial.cols.doc)
      .def("slice", &PiecewisePolynomial<T>::slice,
           py::arg("start_segment_index"), py::arg("num_segments"),
          doc.PiecewisePolynomial.slice.doc)
      .def("shiftRight", &PiecewisePolynomial<T>::shiftRight,
           py::arg("offset"), doc.PiecewisePolynomial.shiftRight.doc);
}

}  // namespace pydrake
}  // namespace drake
