# tk 20141113 debugMexTest causes compilation errors on Ubuntu 32 bit
# See https://github.com/RobotLocomotion/drake/issues/553
# debugMexTester.m and debugMexTest.cpp were moved to dev
# add_mex(debugMexTest debugMexTest.cpp)

add_executable(testDrakeGradientUtil testDrakeGradientUtil.cpp)
target_link_libraries(testDrakeGradientUtil drakeGeometryUtil)
add_test(NAME testDrakeGradientUtil COMMAND testDrakeGradientUtil)

if(MATLAB_FOUND)
  add_mex(testQuatmex testQuatmex.cpp)
  target_link_libraries(testQuatmex drakeGeometryUtil)

  add_mex(testGeometryGradientsmex testGeometryGradientsmex.cpp)
  target_link_libraries(testGeometryGradientsmex drakeGeometryUtil drakeMexUtil)

  add_mex(testGeometryConversionFunctionsmex testGeometryConversionFunctionsmex.cpp)
  target_link_libraries(testGeometryConversionFunctionsmex drakeGeometryUtil drakeMexUtil)
endif()

if(lcm_FOUND)
add_executable(testLCMUtil testLCMUtil.cpp)
target_link_libraries(testLCMUtil drakeLCMUtil ${GTEST_BOTH_LIBRARIES})
add_test(NAME testLCMUtil COMMAND testLCMUtil)
endif()

add_executable(testConvexHull testConvexHull.cpp)
target_link_libraries(testConvexHull drakeConvexHull ${GTEST_BOTH_LIBRARIES})
add_test(NAME testConvexHull COMMAND testConvexHull)

add_executable(testDrakeGeometryUtil testDrakeGeometryUtil.cpp)
target_link_libraries(testDrakeGeometryUtil drakeGeometryUtil ${GTEST_BOTH_LIBRARIES})
add_test(NAME testDrakeGeometryUtil COMMAND testDrakeGeometryUtil)

add_matlab_test(NAME util/test/PassByValueMapTest COMMAND PassByValueMapTest)
add_matlab_test(NAME util/test/angleDiffTest COMMAND angleDiffTest)
add_matlab_test(NAME util/test/asintest REQUIRES spotless COMMAND asintest)
add_matlab_test(NAME util/test/atan2test COMMAND atan2test)
add_matlab_test(NAME util/test/baryTest COMMAND baryTest)
add_matlab_test(NAME util/test/expmap2quatTest COMMAND expmap2quatTest)
add_matlab_test(NAME util/test/foh_test COMMAND foh_test)
add_matlab_test(NAME util/test/invHTTest COMMAND invHTTest)
add_matlab_test(NAME util/test/matGradMultMatTest COMMAND matGradMultMatTest)
add_matlab_test(NAME util/test/matHessianMultMatTest COMMAND matHessianMultMatTest)
add_matlab_test(NAME util/test/mtimesTest COMMAND mtimesTest)
add_matlab_test(NAME util/test/normalizeVecTest COMMAND normalizeVecTest)
add_matlab_test(NAME util/test/numericalGradTest COMMAND numericalGradTest)
add_matlab_test(NAME util/test/pchipDeriv_test COMMAND pchipDeriv_test)
add_matlab_test(NAME util/test/taylorTest OPTIONAL lcm COMMAND taylorTest)
add_matlab_test(NAME util/test/taylorVarScalarMatrixMultTest COMMAND taylorVarScalarMatrixMultTest)
add_matlab_test(NAME util/test/taylorVarSqTest COMMAND taylorVarSqTest)
add_matlab_test(NAME util/test/testAngleAverage COMMAND testAngleAverage)
add_matlab_test(NAME util/test/testAngularvel2quatdotMatrix COMMAND testAngularvel2quatdotMatrix)
add_matlab_test(NAME util/test/testAngularvel2rpydotMatrix COMMAND testAngularvel2rpydotMatrix)
add_matlab_test(NAME util/test/testClosestExpmap COMMAND testClosestExpmap)
add_matlab_test(NAME util/test/testCrossSum COMMAND testCrossSum)
add_matlab_test(NAME util/test/testCubicSplineCoefficients COMMAND testCubicSplineCoefficients)
add_matlab_test(NAME util/test/testCylindrical2cartesian COMMAND testCylindrical2cartesian)
add_matlab_test(NAME util/test/testDHomogTrans COMMAND testDHomogTrans)
add_matlab_test(NAME util/test/testDHomogTransInv COMMAND testDHomogTransInv)
add_matlab_test(NAME util/test/testDTransformSpatialForce COMMAND testDTransformSpatialForce)
add_matlab_test(NAME util/test/testDcross COMMAND testDcross)
add_matlab_test(NAME util/test/testFlipExpmap COMMAND testFlipExpmap)
add_matlab_test(NAME util/test/testGeometryConversionFunctionsComparison COMMAND testGeometryConversionFunctionsComparison)
# DISABLED due to #3224.
if(NOT ${CMAKE_BUILD_TYPE} STREQUAL "Debug")
  add_matlab_test(NAME util/test/testGeometryGradientsComparison
                  COMMAND testGeometryGradientsComparison)
endif()
add_matlab_test(NAME util/test/testMotionSubspace COMMAND testMotionSubspace)
add_matlab_test(NAME util/test/testMotionSubspaceDotTimesV COMMAND testMotionSubspaceDotTimesV)
add_matlab_test(NAME util/test/testOrientation COMMAND testOrientation)
add_matlab_test(NAME util/test/testPopulateLCMFields REQUIRES lcm COMMAND testPopulateLCMFields)
add_matlab_test(NAME util/test/testQuadFormGrad COMMAND testQuadFormGrad)
add_matlab_test(NAME util/test/testQuat COMMAND testQuat)
add_matlab_test(NAME util/test/testQuat2expmap COMMAND testQuat2expmap)
add_matlab_test(NAME util/test/testQuat2expmapSequence COMMAND testQuat2expmapSequence)
add_matlab_test(NAME util/test/testQuat2rotmat COMMAND testQuat2rotmat)
# add_matlab_test(NAME util/test/testQuatConjugate COMMAND testQuatConjugate)  # FIXME
# add_matlab_test(NAME util/test/testQuatProduct COMMAND testQuatProduct)  # FIXME
add_matlab_test(NAME util/test/testQuatRotateVec COMMAND testQuatRotateVec)
add_matlab_test(NAME util/test/testQuatdot2angularvel COMMAND testQuatdot2angularvel)
add_matlab_test(NAME util/test/testQuatdot2angularvelMatrix COMMAND testQuatdot2angularvelMatrix)
add_matlab_test(NAME util/test/testQuatdot2expmapdot COMMAND testQuatdot2expmapdot)
add_matlab_test(NAME util/test/testRPY2rotmat COMMAND testRPY2rotmat)
add_matlab_test(NAME util/test/testRPYdot2Angularvel COMMAND testRPYdot2Angularvel)
add_matlab_test(NAME util/test/testRotmat2quat COMMAND testRotmat2quat)
add_matlab_test(NAME util/test/testRotmat2rpy COMMAND testRotmat2rpy)
add_matlab_test(NAME util/test/testTransform COMMAND testTransform)
add_matlab_test(NAME util/test/testUnwrapExpmap COMMAND testUnwrapExpmap)
add_matlab_test(NAME util/test/test_datan2 COMMAND test_datan2)
add_matlab_test(NAME util/test/testqpSpline COMMAND testqpSpline)
add_matlab_test(NAME util/test/trigPolySinTest REQUIRES spotless COMMAND trigPolySinTest)
add_matlab_test(NAME util/test/trigPolyTest REQUIRES spotless OPTIONAL lcm COMMAND trigPolyTest)
add_matlab_test(NAME util/test/tvsumtest COMMAND tvsumtest)
