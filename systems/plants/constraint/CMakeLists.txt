include_directories ( .. )
include_directories (../Constraint)

set(drakeConstraint_SRC_FILES Constraint.cpp constructPtrKinematicConstraint.h )

macro(add_constraint_mex)
  add_mex(${ARGV} ${ARGV}.cpp)
  target_link_libraries(${ARGV} drakeRBM drakeUtil drakeConstraint)
endmacro()


pods_find_pkg_config(eigen3)
if(eigen3_FOUND)
	add_mex(drakeConstraint SHARED ${drakeConstraint_SRC_FILES})
	target_link_libraries(drakeConstraint drakeRBM drakeUtil drakeQuatUtil)
	set_target_properties(drakeConstraint PROPERTIES COMPILE_FLAGS -fPIC )
	pods_install_libraries(drakeConstraint)

	add_constraint_mex(deleteConstraintmex)
	add_constraint_mex(constructPtrWorldCoMConstraintmex)
	add_constraint_mex(constructPtrWorldPositionConstraintmex)
	add_constraint_mex(constructPtrWorldQuatConstraintmex)
	add_constraint_mex(constructPtrWorldEulerConstraintmex)
	add_constraint_mex(constructPtrWorldGazeOrientConstraintmex)
	add_constraint_mex(constructPtrWorldGazeDirConstraintmex)
	add_constraint_mex(constructPtrWorldGazeTargetConstraintmex)
	add_constraint_mex(constructPtrWorldFixedPositionConstraintmex)
	add_constraint_mex(constructPtrWorldFixedOrientConstraintmex)
	add_constraint_mex(constructPtrWorldFixedBodyPostureConstraintmex)
	add_constraint_mex(testSingleTimeKinCnstmex)
	add_constraint_mex(testMultipleTimeKinCnstmex)
	add_constraint_mex(constructPtrQuasiStaticConstraintmex)
	add_constraint_mex(updatePtrQuasiStaticConstraintmex)
	add_constraint_mex(testQuasiStaticConstraintmex)
	add_constraint_mex(constructPtrPostureConstraintmex)
	add_constraint_mex(testPostureConstraintmex)
	add_constraint_mex(constraintTypemex)
endif()
