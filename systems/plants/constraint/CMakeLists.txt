include_directories ( .. )
include_directories (../constraint)

set(drakeRigidBodyConstraint_SRC_FILES RigidBodyConstraint.cpp constructPtrDrakeConstraint.h )

macro(add_constraint_mex)
  add_mex(${ARGV} ${ARGV}.cpp)
  target_link_libraries(${ARGV} drakeRBM drakeUtil drakeRigidBodyConstraint)
endmacro()


pods_find_pkg_config(eigen3)
if(eigen3_FOUND)
  add_mex(drakeRigidBodyConstraint SHARED ${drakeRigidBodyConstraint_SRC_FILES})
  target_link_libraries(drakeRigidBodyConstraint drakeRBM drakeUtil drakeQuatUtil)
  set_target_properties(drakeRigidBodyConstraint PROPERTIES COMPILE_FLAGS -fPIC )
  pods_install_libraries(drakeRigidBodyConstraint)

  add_constraint_mex(deleteRigidBodyConstraintmex)
  add_constraint_mex(constructPtrWorldCoMConstraintmex)
  add_constraint_mex(updatePtrWorldCoMConstraintmex)
  add_constraint_mex(constructPtrWorldPositionConstraintmex)
  add_constraint_mex(updatePtrWorldPositionConstraintmex)
  add_constraint_mex(constructPtrWorldQuatConstraintmex)
  add_constraint_mex(updatePtrWorldQuatConstraintmex)
  add_constraint_mex(constructPtrWorldEulerConstraintmex)
  add_constraint_mex(updatePtrWorldEulerConstraintmex)
  add_constraint_mex(constructPtrWorldGazeOrientConstraintmex)
  add_constraint_mex(updatePtrWorldGazeOrientConstraintmex)
  add_constraint_mex(constructPtrWorldGazeDirConstraintmex)
  add_constraint_mex(updatePtrWorldGazeDirConstraintmex)
  add_constraint_mex(constructPtrWorldGazeTargetConstraintmex)
  add_constraint_mex(updatePtrWorldGazeTargetConstraintmex)
  add_constraint_mex(constructPtrRelativeGazeTargetConstraintmex)
  add_constraint_mex(updatePtrRelativeGazeTargetConstraintmex)
  add_constraint_mex(constructPtrWorldFixedPositionConstraintmex)
  add_constraint_mex(updatePtrWorldFixedPositionConstraintmex)
  add_constraint_mex(constructPtrPoint2PointDistanceConstraintmex)
  add_constraint_mex(updatePtrPoint2PointDistanceConstraintmex)
  add_constraint_mex(constructPtrPoint2LineSegDistConstraintmex)
  add_constraint_mex(updatePtrPoint2LineSegDistConstraintmex)
  add_constraint_mex(constructPtrWorldFixedOrientConstraintmex)
  add_constraint_mex(updatePtrWorldFixedOrientConstraintmex)
  add_constraint_mex(constructPtrWorldFixedBodyPoseConstraintmex)
  add_constraint_mex(updatePtrWorldFixedBodyPoseConstraintmex)
  add_constraint_mex(constructPtrWorldPositionInFrameConstraintmex)
  add_constraint_mex(updatePtrWorldPositionInFrameConstraintmex)
  add_constraint_mex(constructPtrPostureChangeConstraintmex)
  add_constraint_mex(testSingleTimeKinCnstmex)
  add_constraint_mex(testMultipleTimeKinCnstmex)
  add_constraint_mex(constructPtrAllBodiesClosestDistanceConstraintmex)
  add_constraint_mex(updatePtrAllBodiesClosestDistanceConstraintmex)
  add_constraint_mex(constructPtrQuasiStaticConstraintmex)
  add_constraint_mex(updatePtrQuasiStaticConstraintmex)
  add_constraint_mex(testQuasiStaticConstraintmex)
  add_constraint_mex(constructPtrPostureConstraintmex)
  add_constraint_mex(testPostureConstraintmex)
  add_constraint_mex(testMultipleTimeLinearPostureConstraintmex)
  add_constraint_mex(constraintTypemex)
  if (Boost_FOUND)
      add_executable(testConstraintConstructor test/testConstraintConstructor.cpp)
      target_link_libraries(testConstraintConstructor drakeRBM drakeUtil drakeRigidBodyConstraint URDFRigidBodyManipulator urdf_interface)
  endif()
          
endif()

